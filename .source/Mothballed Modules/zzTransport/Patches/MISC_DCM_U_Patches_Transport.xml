<?xml version="1.0" encoding="utf-8" ?>
<Patch>
	<!-- <></> -->
	<!--  -->



	<!-- SNOW CRAWLER -->
		<!-- VVE -->
		<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Vanilla Vehicles Expanded</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationReplace">
				<xpath>Defs/Vehicles.VehicleBuildDef[defName="SCWintermuteBlueprint"]/costList</xpath>
					<value>
						<costList>
							<SnowCrawlerEnginePart>1</SnowCrawlerEnginePart>
							<VVE_CarAlternator>1</VVE_CarAlternator>
							<VVE_CarExhaust>3</VVE_CarExhaust>
							<VVE_CarSuspension>10</VVE_CarSuspension>
							<VVE_CarWheel>12</VVE_CarWheel>
							<Steel>325</Steel>
							<ComponentIndustrial>8</ComponentIndustrial>
						</costList>
					</value>
				</li>
				<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="SnowCrawlerEnginePart"]/recipeMaker/recipeUsers</xpath>
					<value>
						<recipeUsers>
							<li>VVE_GarageBench</li>
						</recipeUsers>
					</value>
				</li>
				<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="SnowCrawlerEnginePart"]/thingCategories</xpath>
					<value>
						<thingCategories>
							<li>VVE_CarParts</li>
						</thingCategories>
					</value>
				</li>
				<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="SnowCrawlerEnginePart"]/recipeMaker/researchPrerequisites</xpath>
					<value>
						<researchPrerequisites><li>VVE_ComplexVehicles</li></researchPrerequisites>
					</value>
				</li>
				<li Class="PatchOperationReplace">
				<xpath>Defs/Vehicles.VehicleBuildDef[defName="SCWintermuteBlueprint"]/researchPrerequisites</xpath>
					<value>
						<researchPrerequisites><li>VVE_ComplexVehicles</li></researchPrerequisites>
					</value>
				</li>
			</operations>
		</match>
	</Operation>
		<!-- ENGINE INDUSTRIES -->
		<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Engine Industries</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="SnowCrawlerEnginePart"]/costList</xpath>
					<value>
						<costList>
							<EngineHeavy>1</EngineHeavy>
							<Steel>15</Steel>
							<Gold>1</Gold>
							<ComponentIndustrial>1</ComponentIndustrial>
						</costList>
					</value>
				</li>
			</operations>
		</match>
	</Operation>
		<!-- WINTER TAIGA BIOME -->
		<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Winter Taiga Biome</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
				<xpath>Defs/Vehicles.VehicleDef[defName="SCWintermute"]/properties/customBiomeCosts</xpath>
					<value>
						<li>
							<key>WinterTaiga</key>
							<value>1</value>
						</li>
					</value>
				</li>
			</operations>
		</match>
	</Operation>

	<!-- VVE SECONDARY -->
		<!-- BULLDOG UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Bulldog"]/comps</xpath>
		<value>
			<li Class="Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_Bulldog_UpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- ROADRUNNER REAR SEAT -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Roadrunner"]/properties/roles</xpath>
		<value>
			<li>
				<key>gunner</key>
				<label>Passenger 2</label>
				<slots>1</slots>
				
				<exposed>true</exposed>
				
				<hitbox>
					<cells>
						<li>(1, 1)</li>
					</cells>
				</hitbox>
				
				<pawnRenderer>
					<layer>1</layer>
					<drawOffsetNorth>(-0.6, 0, -0.3)</drawOffsetNorth>
					<drawOffsetSouth>(0.6, 0, 1)</drawOffsetSouth>
					<drawOffsetEast>(-0.6, 0, 0.7)</drawOffsetEast>
					<north>East</north>
					<east>South</east>
					<south>West</south>
					<west>North</west>
					<northEast>East</northEast>
					<southEast>West</southEast>
					<southWest>West</southWest>
					<northWest>East</northWest>
				</pawnRenderer>
			</li>
			<li>
				<key>passenger3</key>
				<label>Passenger 3</label>
				<slots>1</slots>
				
				<exposed>true</exposed>
				
				<hitbox>
					<cells>
						<li>(1, 1)</li>
					</cells>
				</hitbox>
				
				<pawnRenderer>
					<layer>1</layer>
					<drawOffsetNorth>(0.6, 0, -0.3)</drawOffsetNorth>
					<drawOffsetSouth>(-0.6, 0, 1)</drawOffsetSouth>
					<drawOffsetEast>(-0.6, 0, -0.1)</drawOffsetEast>
					<north>West</north>
					<east>North</east>
					<south>East</south>
					<west>South</west>
					<northEast>West</northEast>
					<southEast>East</southEast>
					<southWest>East</southWest>
					<northWest>West</northWest>
				</pawnRenderer>
			</li>
		</value>
	</Operation>
		<!-- ROADRUNNER UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Roadrunner"]/comps</xpath>
		<value>
			<li Class="Vehicles.CompProperties_VehicleTurrets">
				<turrets/>
			</li>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Roadrunner"]/comps</xpath>
		<value>
			<li Class="Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_Roadrunner_UpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- TANGO UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Tango"]/comps</xpath>
		<value>
			<li Class="Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_Tango_UpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- TRAWLER REAR SEATS -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Trawler"]/properties/roles</xpath>
		<value>
			<li>
				<key>gunnerbow</key>
				<label>Passenger 2</label>
				<slots>1</slots>

				<exposed>true</exposed>
				
				<hitbox>
					<cells>
						<li>(1, 1)</li>
					</cells>
				</hitbox>
				
				<pawnRenderer>
					<layer>1</layer>
					<drawOffsetNorth>(-0.6, 0, -1.2)</drawOffsetNorth>
					<drawOffsetSouth>(0.6, 0, 2)</drawOffsetSouth>
					<drawOffsetEast>(-2, 0, 0.8)</drawOffsetEast>
					<north>East</north>
					<east>South</east>
					<south>West</south>
					<west>North</west>
					<northEast>East</northEast>
					<southEast>West</southEast>
					<southWest>West</southWest>
					<northWest>East</northWest>
				</pawnRenderer>
			</li>
			<li>
				<key>gunneraft</key>
				<label>Passenger 3</label>
				<slots>1</slots>
				
				<exposed>true</exposed>
				
				<hitbox>
					<cells>
						<li>(1, 1)</li>
					</cells>
				</hitbox>
				
				<pawnRenderer>
					<layer>1</layer>
					<drawOffsetNorth>(0.6, 0, -1.2)</drawOffsetNorth>
					<drawOffsetSouth>(-0.6, 0, 2)</drawOffsetSouth>
					<drawOffsetEast>(-2, 0, -0.4)</drawOffsetEast>
					<north>West</north>
					<east>North</east>
					<south>East</south>
					<west>South</west>
					<northEast>West</northEast>
					<southEast>East</southEast>
					<southWest>East</southWest>
					<northWest>West</northWest>
				</pawnRenderer>
			</li>
		</value>
	</Operation>
		<!-- TRAWLER UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Trawler"]/comps</xpath>
		<value>
			<li Class="Vehicles.CompProperties_VehicleTurrets">
				<turrets/>
			</li>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Trawler"]/comps</xpath>
		<value>
			<li Class="Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_Trawler_UpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- WISENT UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Wisent"]/comps</xpath>
		<value>
			<li Class="Vehicles.CompProperties_VehicleTurrets">
				<turrets/>
			</li>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Wisent"]/comps</xpath>
		<value>
			<li Class="Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_Wisent_UpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- BUNSEN COAX MG -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Bunsen"]/properties/roles/li[key="gunner"]/turretIds</xpath>
		<value>
			<li>coaxialMG</li>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Bunsen"]/comps/li[@Class="Vehicles.CompProperties_VehicleTurrets"]/turrets</xpath>
		<value>
			<li>
				<turretDef>TGBM_VVECoaxialLMG</turretDef>
				
				<renderProperties>
					<north>(-0.2,0.45)</north>
					<south>(0.2,-0.45)</south>
					<east>(0.45,0.2)</east>
					<west>(-0.45,-0.2)</west>
				</renderProperties>
				
				<gizmoLabel>coaxial MG</gizmoLabel>
				<angleRestricted>(345,15)</angleRestricted>
				<aimPieOffset>(0, 0)</aimPieOffset>
				<key>coaxialMG</key>
				
				<drawLayer>4</drawLayer>		
				
				<parentKey>mainTurret</parentKey>
			</li>
		</value>
	</Operation>
		<!-- ROADKILL MG -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Roadkill"]/properties/roles/li[key="driver"]/turretIds</xpath>
		<value>
			<li>coaxialMG</li>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Roadkill"]/comps/li[@Class="Vehicles.CompProperties_VehicleTurrets"]/turrets</xpath>
		<value>
			<li>
				<turretDef>TGBM_VVECoaxialLMG</turretDef>
				
				<renderProperties>
					<north>(-0.2,0.6)</north>
					<south>(0.2,-0.6)</south>
					<east>(0.6,0.2)</east>
					<west>(-0.6,-0.2)</west>
				</renderProperties>
				
				<gizmoLabel>coaxial MG</gizmoLabel>
				<angleRestricted>(345,15)</angleRestricted>
				<aimPieOffset>(0, 0)</aimPieOffset>
				<key>coaxialMG</key>
				
				<drawLayer>1</drawLayer>		
				<parentKey>mainTurret</parentKey>
			</li>
		</value>
	</Operation>
		<!--Make MG appear inside main turret-->
		<Operation Class="PatchOperationReplace">
			<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Roadkill"]/comps/li[@Class="Vehicles.CompProperties_VehicleTurrets"]/turrets/li[turretDef="Roadkill_MainTurret"]/drawLayer</xpath>
			<value>
				<drawLayer>2</drawLayer>
			</value>
		</Operation>
		<!-- BULLDOG BOW GUNNER -->
		<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Bulldog"]/properties/roles/li[key="driver"]/slots</xpath>
		<value>
			<slots>2</slots>
		</value>
	</Operation>
		<!-- BULLDOG LOADER -->
		<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Bulldog"]/properties/roles/li[key="gunner"]/slots</xpath>
		<value>
			<slots>2</slots>
		</value>
	</Operation>
		<!-- BULLDOG COMMANDER -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Bulldog"]/properties/roles</xpath>
		<value>
			<li>
				<key>commander</key>
				<label>Commander</label>
				<slots>1</slots>
				<slotsToOperate>1</slotsToOperate>
				
				<hitbox>
					<cells>
						<li>(0, 0)</li>
					</cells>
				</hitbox>
				
				<handlingTypes>Turret</handlingTypes>
				
				<turretIds>
					<li>pintleMG</li>
				</turretIds>
			</li>
		</value>
	</Operation>
		<!-- BULLDOG ADDED CREW -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleTurretDef[defName="Bulldog_MainTurret"]</xpath>
		<value>
			<reloadTimerMultiplierPerCrewCount>
				<points>
					<li>(1, 1)</li>
					<li>(2, 0.75)</li>
				</points>
			</reloadTimerMultiplierPerCrewCount>
		</value>
	</Operation>
		<!-- BULLDOG BOW AND COAX MG -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Bulldog"]/comps/li[@Class="Vehicles.CompProperties_VehicleTurrets"]/turrets/li[key="mainTurret"]</xpath>
		<value>
			<drawLayer>2</drawLayer>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Bulldog"]/properties/roles/li[key="driver"]</xpath>
		<value>
			<turretIds>
				<li>hullMG</li>
			</turretIds>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Bulldog"]/properties/roles/li[key="driver"]/handlingTypes</xpath>
		<value>
			<li>Turret</li>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Bulldog"]/properties/roles/li[key="gunner"]/turretIds</xpath>
		<value>
			<li>coaxialMG</li>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Bulldog"]/comps/li[@Class="Vehicles.CompProperties_VehicleTurrets"]/turrets</xpath>
		<value>
			<li>
				<turretDef>TGBM_VVECoaxial_Springfield</turretDef>
				
				<renderProperties>
					<north>(0.35,2.2)</north>
					<south>(-0.35,-1.5)</south>
					<east>(1.65,0)</east>
					<west>(-1.65,0)</west>
				</renderProperties>
						
				<gizmoLabel>bow MG</gizmoLabel>
				<angleRestricted>(315,45)</angleRestricted>
				<aimPieOffset>(0, 0)</aimPieOffset>
				<key>hullMG</key>
				
				<drawLayer>1</drawLayer>		
			</li>
			<li>
				<turretDef>TGBM_VVECoaxial_Springfield</turretDef>
				
				<renderProperties>
					<north>(0.35,0.9)</north>
					<south>(-0.35,-0.9)</south>
					<east>(0.9,-0.35)</east>
					<west>(-0.9,0.35)</west>
				</renderProperties>
				
				<gizmoLabel>coaxial MG</gizmoLabel>
				<angleRestricted>(345,15)</angleRestricted>
				<aimPieOffset>(0, 0)</aimPieOffset>
				<key>coaxialMG</key>
				<parentKey>mainTurret</parentKey>
				
				<drawLayer>1</drawLayer>	
			</li>
		</value>
	</Operation>
		<!-- SNATCHER MORE CREW -->
		<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Snatcher"]/properties/roles/li[key="passenger"]/slots</xpath>
		<value>
			<slots>6</slots>
		</value>
	</Operation>
		<!-- TANGO MORE CREW -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Tango"]/properties/roles/li[key="gunner"]/turretIds</xpath>
		<value>
			<li>coaxialMG</li>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Tango"]/properties/roles</xpath>
		<value>
			<li>
				<key>commander</key>
				<label>Commander</label>
				<slots>1</slots>
				
				<hitbox>
					<cells>
						<li>(0, 0)</li>
					</cells>
				</hitbox>
			</li>
		</value>
	</Operation>
	<Operation Class="PatchOperationReplace"> <!-- M113 ACAV (? / 20mm autocannon) -->
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Tango"]/properties/roles/li[key="passenger"]/slots</xpath>
		<value>
			<slots>9</slots>
		</value>
	</Operation>
		<!-- WAGON MORE CREW -->
		<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Wagon"]/properties/roles/li[key="passenger"]/slots</xpath>
		<value>
			<slots>4</slots>
		</value>
	</Operation>
		<!-- FROG UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName = "VVE_Frog"]/comps</xpath>
		<value>
			<li Class = "Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_Frog_UpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- TOAD UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName = "VVE_Toad"]/comps</xpath>
		<value>
			<li Class = "Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_Toad_UpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- DIRTBIKE UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName = "VVE_Dirtbike"]/comps</xpath>
		<value>
			<li Class = "Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_LightCommonUpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- SCYTHEMAN UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName = "VVE_Scytheman"]/comps</xpath>
		<value>
			<li Class = "Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_LightCommonUpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- CHARLEY UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName = "VVE_Charley"]/comps</xpath>
		<value>
			<li Class = "Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_LightCommonUpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- MOSQUITO UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName = "VVE_Mosquito"]/comps</xpath>
		<value>
			<li Class = "Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_MediumCommonUpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- SMUGGLER UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName = "VVE_Smuggler"]/comps</xpath>
		<value>
			<li Class = "Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_MediumCommonUpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- SNATCHER UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName = "VVE_Snatcher"]/comps</xpath>
		<value>
			<li Class = "Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_MediumCommonUpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- WAGON UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName = "VVE_Wagon"]/comps</xpath>
		<value>
			<li Class = "Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_MediumCommonUpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- WARBIRD UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName = "VVE_Warbird"]/comps</xpath>
		<value>
			<li Class = "Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_MediumCommonUpgradeTree</def>
			</li>
		</value>
	</Operation>
		<!-- DINGHY UPGRADE AND COMPS -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Dinghy"]/comps</xpath>
		<value>
			<li Class = "Vehicles.CompProperties_UpgradeTree">
				<def>TGBM_VVE_Dinghy_UpgradeTree</def>
			</li>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Dinghy"]/comps</xpath>
		<value>
			<li Class="Vehicles.CompProperties_VehicleTurrets">
				<turrets/>
			</li>
		</value>
	</Operation>
		<!-- MULE TECHNICAL CONVERSION -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Mule"]/comps</xpath>
		<value>
			<li Class="Vehicles.CompProperties_VehicleTurrets">
				<turrets/>
			</li>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Mule"]/properties/roles</xpath>
		<value>
			<li>
				<key>gunner</key>
				<label>Passenger 2</label>
				<slots>1</slots>
				
				<hitbox>
					<cells>
						<li>(1, 1)</li>
					</cells>
				</hitbox>
				
				<pawnRenderer>
					<layer>1</layer>
					<drawOffsetNorth>(-0.6, 0, -0.3)</drawOffsetNorth>
					<drawOffsetSouth>(0.6, 0, 1)</drawOffsetSouth>
					<drawOffsetEast>(-0.6, 0, 0.7)</drawOffsetEast>
					<north>East</north>
					<east>South</east>
					<south>West</south>
					<west>North</west>
					<northEast>East</northEast>
					<southEast>West</southEast>
					<southWest>West</southWest>
					<northWest>East</northWest>
				</pawnRenderer>

				<exposed>true</exposed>
			</li>
			<li>
				<key>passenger3</key>
				<label>Passenger 3</label>
				<slots>1</slots>

				<exposed>true</exposed>
				
				<hitbox>
					<cells>
						<li>(1, 1)</li>
					</cells>
				</hitbox>
				
				<pawnRenderer>
					<layer>1</layer>
					<drawOffsetNorth>(0.6, 0, -0.3)</drawOffsetNorth>
					<drawOffsetSouth>(-0.6, 0, 1)</drawOffsetSouth>
					<drawOffsetEast>(-0.6, 0, 0)</drawOffsetEast>
					<north>West</north>
					<east>South</east>
					<south>East</south>
					<west>North</west>
					<northEast>West</northEast>
					<southEast>East</southEast>
					<southWest>East</southWest>
					<northWest>West</northWest>
				</pawnRenderer>
			</li>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="VVE_Mule_UpgradeTree"]/nodes</xpath>
		<value>
			<li>
				<key>MachineGunMTwoFourty</key>
				<label>Medium machine gun</label>
				<description>Attach a medium machine gun to the bed.\n\nCannot be used with bed canvas. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -15kg</description>
				
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>3000</work>
				<disableIfUpgradeNodesEnabled>
					<li>ExpandedCargoSpace</li>
					<li>MachineGunMTwoHB</li>
					<li>GrenadeMachineGun</li>
					<li>RecoillessRifle</li>
					<li MayRequire="CETeam.CombatExtended">MachineGunPKM</li>
					<li MayRequire="CETeam.CombatExtended">MachineGunMaxim</li>
					<li MayRequire="CETeam.CombatExtended">MachineGunDShK</li>
					<li MayRequire="CETeam.CombatExtended">GrenadeMachineGunAGS</li>
					<li MayRequire="CETeam.CombatExtended">RecoillessRifleSPG</li>
				</disableIfUpgradeNodesEnabled>
				<gridCoordinate>(35, 6)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<ingredients>
					<Steel>150</Steel>
					<ComponentIndustrial>5</ComponentIndustrial>
				</ingredients>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<editKey>gunnerMMG</editKey>

								<handlingTypes>Turret</handlingTypes>
								<slotsToOperate>1</slotsToOperate>
								
								<turretIds>
									<li>mainTurret</li>
								</turretIds>
								
								<pawnRenderer>
									<layer>1</layer>
									<drawOffsetNorth>(0, 0, -1)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
									<drawOffsetEast>(-1.9, 0, 0.5)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_WisentMMG</turretDef>
										
								<renderProperties>
									<north>(0, 1.2)</north>
									<south>(0, 0.9)</south>
									<east>(-1, 0.6)</east>
								</renderProperties>
								
								<gizmoLabel>Medium machine gun</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>2</drawLayer>
								
								<key>mainTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-15</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Mule_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(5,5)</drawSize>
							<layer>1</layer>
							<shaderType>Cutout</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
			<li>
				<key>MachineGunMTwoHB</key>
				<label>Heavy machine gun</label>
				<description>Attach a heavy machine gun to the bed.\n\nCannot be used with bed canvas. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -58kg</description>
				
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>4000</work>
				<disableIfUpgradeNodesEnabled>
					<li>ExpandedCargoSpace</li>
					<li>MachineGunMTwoFourty</li>
					<li>GrenadeMachineGun</li>
					<li>RecoillessRifle</li>
					<li MayRequire="CETeam.CombatExtended">MachineGunPKM</li>
					<li MayRequire="CETeam.CombatExtended">MachineGunMaxim</li>
					<li MayRequire="CETeam.CombatExtended">MachineGunDShK</li>
					<li MayRequire="CETeam.CombatExtended">GrenadeMachineGunAGS</li>
					<li MayRequire="CETeam.CombatExtended">RecoillessRifleSPG</li>
				</disableIfUpgradeNodesEnabled>
				<gridCoordinate>(37, 6)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<ingredients>
					<Steel>210</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<editKey>gunnerHMG</editKey>
								
								<handlingTypes>Turret</handlingTypes>
								<slotsToOperate>1</slotsToOperate>
								
								<turretIds>
									<li>mainTurret</li>
								</turretIds>
								
								<pawnRenderer>
									<layer>1</layer>
									<drawOffsetNorth>(0, 0, -1)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
									<drawOffsetEast>(-1.9, 0, 0.5)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_WisentHMG</turretDef>
										
								<renderProperties>
									<north>(0, 1.2)</north>
									<south>(0, 0.9)</south>
									<east>(-1, 0.6)</east>
								</renderProperties>
								
								<gizmoLabel>Heavy machine gun</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 0.4)</aimPieOffset>
								<drawLayer>2</drawLayer>
								
								<key>mainTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-58</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Mule_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(5,5)</drawSize>
							<layer>1</layer>
							<shaderType>Cutout</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
			<li>
				<key>GrenadeMachineGun</key>
				<label>Grenade machine gun</label>
				<description>Attach a grenade machine gun to the bed.\n\nCannot be used with bed canvas. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -62kg</description>
				
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>6000</work>
				<disableIfUpgradeNodesEnabled>
					<li>ExpandedCargoSpace</li>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
					<li>RecoillessRifle</li>
					<li MayRequire="CETeam.CombatExtended">MachineGunPKM</li>
					<li MayRequire="CETeam.CombatExtended">MachineGunMaxim</li>
					<li MayRequire="CETeam.CombatExtended">MachineGunDShK</li>
					<li MayRequire="CETeam.CombatExtended">GrenadeMachineGunAGS</li>
					<li MayRequire="CETeam.CombatExtended">RecoillessRifleSPG</li>
				</disableIfUpgradeNodesEnabled>
				<gridCoordinate>(35, 8)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<ingredients>
					<Steel>130</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<editKey>gunnerGMG</editKey>
								
								<handlingTypes>Turret</handlingTypes>
								<slotsToOperate>1</slotsToOperate>
								
								<turretIds>
									<li>mainTurret</li>
								</turretIds>
								
								<pawnRenderer>
									<layer>1</layer>
									<drawOffsetNorth>(0, 0, -1)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
									<drawOffsetEast>(-1.9, 0, 0.5)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedGMG</turretDef>
										
								<renderProperties>
									<north>(0, 1.2)</north>
									<south>(0, 0.9)</south>
									<east>(-1, 0.6)</east>
								</renderProperties>
								
								<gizmoLabel>Grenade machine gun</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 0.4)</aimPieOffset>
								<drawLayer>2</drawLayer>
								
								<key>mainTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-62</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Mule_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(5,5)</drawSize>
							<layer>1</layer>
							<shaderType>Cutout</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
			<li>
				<key>RecoillessRifle</key>
				<label>Recoilless rifle</label>
				<description>Attach a recoilless rifle to the bed.\n\nCannot be used with bed canvas. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -7kg</description>
				
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>5000</work>
				<disableIfUpgradeNodesEnabled>
					<li>ExpandedCargoSpace</li>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
					<li>GrenadeMachineGun</li>
					<li MayRequire="CETeam.CombatExtended">MachineGunPKM</li>
					<li MayRequire="CETeam.CombatExtended">MachineGunMaxim</li>
					<li MayRequire="CETeam.CombatExtended">MachineGunDShK</li>
					<li MayRequire="CETeam.CombatExtended">GrenadeMachineGunAGS</li>
					<li MayRequire="CETeam.CombatExtended">RecoillessRifleSPG</li>
				</disableIfUpgradeNodesEnabled>
				<gridCoordinate>(37, 8)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<ingredients>
					<Steel>75</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<editKey>gunnerRLCG</editKey>
								
								<handlingTypes>Turret</handlingTypes>
								<slotsToOperate>1</slotsToOperate>
								
								<turretIds>
									<li>mainTurret</li>
								</turretIds>
								
								<pawnRenderer>
									<layer>1</layer>
									<drawOffsetNorth>(0, 0, -1)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
									<drawOffsetEast>(-1.9, 0, 0.5)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedRecoillessRifle</turretDef>
										
								<renderProperties>
									<north>(0, 1.2)</north>
									<south>(0, 0.9)</south>
									<east>(-1, 0.6)</east>
								</renderProperties>
								
								<gizmoLabel>Recoilless rifle</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 0.4)</aimPieOffset>
								<drawLayer>3</drawLayer>
								
								<key>mainTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-7</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Mule_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(5,5)</drawSize>
							<layer>1</layer>
							<shaderType>Cutout</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
		</value>
	</Operation>
		<!-- DISABLE CARGO SPACE FOR WEAPONS -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="VVE_Mule_UpgradeTree"]/nodes/li[key="ExpandedCargoSpace"]</xpath>
		<value>
			<disableIfUpgradeNodesEnabled>
				<li>MachineGunMTwoFourty</li>
				<li>MachineGunMTwoHB</li>
				<li>GrenadeMachineGun</li>
				<li>RecoillessRifle</li>
				<li MayRequire="CETeam.CombatExtended">MachineGunPKM</li>
				<li MayRequire="CETeam.CombatExtended">MachineGunMaxim</li>
				<li MayRequire="CETeam.CombatExtended">MachineGunDShK</li>
				<li MayRequire="CETeam.CombatExtended">GrenadeMachineGunAGS</li>
				<li MayRequire="CETeam.CombatExtended">RecoillessRifleSPG</li>
			</disableIfUpgradeNodesEnabled>
		</value>
	</Operation>
		<!-- ROADKILL TURRETS AND UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="VVE_Roadkill_UpgradeTree"]/nodes/li[key="GunnerSeat"]/upgrades/li[@Class="Vehicles.VehicleUpgrade"]/roles/li[key="gunner"]/turretIds</xpath>
		<value>
			<li>coaxialMG</li>
		</value>
	</Operation>
		<!-- INCREASED CREW -->
		<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="VVE_Roadkill_UpgradeTree"]/nodes/li[key="GunnerSeat"]/upgrades/li[@Class = "Vehicles.VehicleUpgrade"]/roles/li[key="gunner"]/slots</xpath>
		<value>
			<slots>2</slots>
		</value>
	</Operation>
		<!-- AFFECTED BY INCREASED CREW -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleTurretDef[defName="Roadkill_MainTurret" or defName="Roadkill_MainTurret_ShortBarrel" or defName="Roadkill_MainTurret_LongBarrel"]</xpath>
		<value>
			<reloadTimerMultiplierPerCrewCount>
				<points>
					<li>(1, 1)</li>
					<li>(2, 0.75)</li>
				</points>
			</reloadTimerMultiplierPerCrewCount>
		</value>
	</Operation>
		<!-- DRAWLAYER -->
		<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="VVE_Roadkill_UpgradeTree"]/nodes/li[key="ShortBarrel"]/upgrades/li[@Class = "Vehicles.TurretUpgrade"]/turrets/li[turretDef="Roadkill_MainTurret_ShortBarrel"]/drawLayer</xpath>
		<value>
			<drawLayer>2</drawLayer>
		</value>
	</Operation>
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="VVE_Roadkill_UpgradeTree"]/nodes/li[key="LongBarrel"]/upgrades/li[@Class = "Vehicles.TurretUpgrade"]/turrets/li[turretDef="Roadkill_MainTurret_LongBarrel"]/drawLayer</xpath>
		<value>
			<drawLayer>2</drawLayer>
		</value>
	</Operation>
		<!-- BADGER STOCK WEAPONS -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Badger"]/properties/roles/li[key="gunner"]/turretIds</xpath>
		<value>
			<li>coaxialMG</li>
		</value>
	</Operation>
		<!-- DRAWLAYER -->
		<Operation Class="PatchOperationFindMod">
		<mods>
			<li>VVE: Tier 3 Upgrades</li>
		</mods>
		<match Class="PatchOperationAdd">
			<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Badger"]/comps/li[@Class="Vehicles.CompProperties_VehicleTurrets"]/turrets</xpath>
			<value>
				<li>
					<turretDef>TGBM_VVECoaxialMMG</turretDef>
					
					<renderProperties>
						<north>(0.25, 0.6)</north>
						<south>(-0.25, 0.6)</south>
						<east>(0.6, -0.25)</east>
					</renderProperties>
							
					<gizmoLabel>coaxial machine gun</gizmoLabel>		
					
					<angleRestricted>(345,15)</angleRestricted>
					<aimPieOffset>(0, 0)</aimPieOffset>
					<key>coaxialMG</key>
					
					<drawLayer>2</drawLayer>		
					<parentKey>mainTurret</parentKey>
				</li>
			</value>
		</match>
		<nomatch Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Badger"]/comps/li[@Class="Vehicles.CompProperties_VehicleTurrets"]/turrets/li[key="mainTurret"]</xpath>
					<value>
						<drawLayer>2</drawLayer>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Badger"]/comps/li[@Class="Vehicles.CompProperties_VehicleTurrets"]/turrets</xpath>
					<value>
						<li>
							<turretDef>TGBM_VVECoaxialMMG</turretDef>
							
							<renderProperties>
								<north>(0.25, 0.6)</north>
								<south>(-0.25, 0.6)</south>
								<east>(0.6, -0.25)</east>
							</renderProperties>
									
							<gizmoLabel>coaxial machine gun</gizmoLabel>		
							
							<angleRestricted>(345,15)</angleRestricted>
							<aimPieOffset>(0, 0)</aimPieOffset>
							<key>coaxialMG</key>
							
							<drawLayer>1</drawLayer>		
							<parentKey>mainTurret</parentKey>
						</li>
					</value>
				</li>
			</operations>
		</nomatch>
	</Operation>
		<!-- PASSENGER -->
		<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Badger"]/properties/roles/li[key="passenger"]/slots</xpath>
		<value>
			<slots>6</slots>
		</value>
	</Operation>
		<!-- COMMANDER -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Badger"]/properties/roles</xpath>
		<value>
			<li>
				<key>commander</key>
				<label>Commander</label>
				<slots>1</slots>
				
				<hitbox>
					<cells>
						<li>(0, 0)</li>
					</cells>
				</hitbox>
			</li>
		</value>
	</Operation>
		<!-- CHEROKEE ROTOR LAYER -->
		<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Cherokee"]/drawProperties/graphicOverlays/li/graphicData[texPath="Things/Vehicles/Tier3/Tier3_CargoHelicopter/Tier3_CargoHelicopter_RotorTop"]/layer</xpath>
		<value>
			<layer>2</layer>
		</value>
	</Operation>
		<!-- TIER 3 UPGRADES -->
		<Operation Class="PatchOperationFindMod">
		<mods>
			<li>VVE: Tier 3 Upgrades</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationReplace">
					<xpath>Defs/Vehicles.UpgradeTreeDef[defName="SEX_CargoPlane_UpgradeTree"]/nodes/li[key="SEX_PassengerCabin"]/description</xpath>
					<value>
						<description>Pressurize the cargo holds and make space for 33 passenger seats. Also acts as a temporary shelter providing comfort for occupants. Reduces the effective cargo capacity of the vehicle by 2800 kilos.</description>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>Defs/Vehicles.UpgradeTreeDef[defName="SEX_CargoPlane_UpgradeTree"]/nodes/li[key="SEX_PassengerCabin"]/upgrades/li[@Class="Vehicles.VehicleUpgrade"]/roles/li[key="passenger"]/slots</xpath>
					<value>
						<slots>33</slots>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.UpgradeTreeDef[defName="SEX_CargoPlane_UpgradeTree"]/nodes/li[key="SEX_PassengerCabin"]/upgrades/li[@Class="Vehicles.VehicleUpgrade"]/roles/li[key="passenger"]</xpath>
					<value>
						<comfort>0.75</comfort>
					</value>
				</li>
			</operations>
		</match>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Cherokee"]/comps</xpath>
			<value>
				<li Class="Vehicles.CompProperties_UpgradeTree">
					<def>TGBM_VVE_Cherokee_UpgradeTree</def>
				</li>
			</value>
		</nomatch>
	</Operation>
		<!-- UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Cherokee"]/comps</xpath>
		<value>
			<li Class="Vehicles.CompProperties_VehicleTurrets">
				<turrets/>
			</li>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="SEX_CargoPlane_UpgradeTree" or defName="TGBM_VVE_Cherokee_UpgradeTree"]/nodes</xpath>
		<value>
			<li>
				<key>MachineGunMTwoFourty</key>
				<label>Medium machine gun</label>
				<description>Attach two medium machine guns to the vehicle's sides. Comes with gunner seats.</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>10000</work>
				<gridCoordinate>(17, 6)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<ingredients>
					<Steel>300</Steel>
					<ComponentIndustrial>10</ComponentIndustrial>
				</ingredients>
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoHB</li>
					<li>MachineGunMinigun</li>
				</disableIfUpgradeNodesEnabled>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<label>Gunner</label>
								
								<slots>2</slots>
								<slotsToOperate>1</slotsToOperate>
								
								<handlingTypes>Turret</handlingTypes>

								<turretIds>
									<li>doorMG1</li>
									<li>doorMG2</li>
								</turretIds>

								<hitbox>
									<cells>
										<li>(-1, 5)</li>
										<li>(0, 5)</li>
										<li>(1, 5)</li>
										<li>(-1, 4)</li>
										<li>(0, 4)</li>
										<li>(1, 4)</li>
									</cells>
								</hitbox>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_WindowMMG</turretDef>
								
								<renderProperties>
									<north>(-1.3, 3)</north>
									<south>(1.3, -2)</south>
									<east>(3.24, 0.6)</east>
									<west>(-3.24, -0.6)</west>
								</renderProperties>
								
								<gizmoLabel>Gunner 1</gizmoLabel>
								
								<defaultAngleRotated>270</defaultAngleRotated>
								
								<angleRestricted>(180, 0)</angleRestricted>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>doorMG1</key>
							</li>
							<li>
								<turretDef>TGBM_WindowMMG</turretDef>
								
								<renderProperties>
									<north>(1.3, 3)</north>
									<south>(-1.3, -2)</south>
									<east>(3.24, -0.6)</east>
									<west>(-3.24, 0.6)</west>
								</renderProperties>
								
								<gizmoLabel>Gunner 2</gizmoLabel>
								
								<defaultAngleRotated>90</defaultAngleRotated>
								
								<angleRestricted>(360, 180)</angleRestricted>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>doorMG2</key>
							</li>
						</turrets>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Cherokee_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(5,12)</drawSize>
							<layer>2</layer>
							<shaderType>CutoutComplexPattern</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
			<li>
				<key>MachineGunMTwoHB</key>
				<label>Heavy machine gun</label>
				<description>Attach two heavy machine guns to the vehicle's sides. Comes with gunner seats.</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>10000</work>
				<gridCoordinate>(17, 8)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<ingredients>
					<Steel>410</Steel>
					<ComponentIndustrial>12</ComponentIndustrial>
				</ingredients>
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMinigun</li>
				</disableIfUpgradeNodesEnabled>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<label>Gunner</label>
								
								<slots>2</slots>
								<slotsToOperate>1</slotsToOperate>
								
								<handlingTypes>Turret</handlingTypes>

								<turretIds>
									<li>doorMG1</li>
									<li>doorMG2</li>
								</turretIds>

								<hitbox>
									<cells>
										<li>(-1, 5)</li>
										<li>(0, 5)</li>
										<li>(1, 5)</li>
										<li>(-1, 4)</li>
										<li>(0, 4)</li>
										<li>(1, 4)</li>
									</cells>
								</hitbox>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_WindowHMG</turretDef>
								
								<renderProperties>
									<north>(-1.3, 3)</north>
									<south>(1.3, -2)</south>
									<east>(3.24, 0.6)</east>
									<west>(-3.24, -0.6)</west>
								</renderProperties>
								
								<gizmoLabel>Gunner 1</gizmoLabel>
								
								<defaultAngleRotated>270</defaultAngleRotated>
								
								<angleRestricted>(180, 0)</angleRestricted>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>doorMG1</key>
							</li>
							<li>
								<turretDef>TGBM_WindowHMG</turretDef>
								
								<renderProperties>
									<north>(1.3, 3)</north>
									<south>(-1.3, -2)</south>
									<east>(3.24, -0.6)</east>
									<west>(-3.24, 0.6)</west>
								</renderProperties>
								
								<gizmoLabel>Gunner 2</gizmoLabel>
								
								<defaultAngleRotated>90</defaultAngleRotated>
								
								<angleRestricted>(360, 180)</angleRestricted>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>doorMG2</key>
							</li>
						</turrets>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Cherokee_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(5,12)</drawSize>
							<layer>2</layer>
							<shaderType>CutoutComplexPattern</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
			<li>
				<key>MachineGunMinigun</key>
				<label>Minigun</label>
				<description>Attach two miniguns to the vehicle's sides. Comes with gunner seats.</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>10000</work>
				<gridCoordinate>(19, 6)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<ingredients>
					<Steel>270</Steel>
					<ComponentIndustrial>22</ComponentIndustrial>
				</ingredients>
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
				</disableIfUpgradeNodesEnabled>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<label>Gunner</label>
								
								<slots>2</slots>
								<slotsToOperate>1</slotsToOperate>
								
								<handlingTypes>Turret</handlingTypes>

								<turretIds>
									<li>doorMG1</li>
									<li>doorMG2</li>
								</turretIds>

								<hitbox>
									<cells>
										<li>(-1, 5)</li>
										<li>(0, 5)</li>
										<li>(1, 5)</li>
										<li>(-1, 4)</li>
										<li>(0, 4)</li>
										<li>(1, 4)</li>
									</cells>
								</hitbox>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_WindowMinigun</turretDef>
								
								<renderProperties>
									<north>(-1.3, 3)</north>
									<south>(1.3, -2)</south>
									<east>(3.24, 0.6)</east>
									<west>(-3.24, -0.6)</west>
								</renderProperties>
								
								<gizmoLabel>Gunner 1</gizmoLabel>
								
								<defaultAngleRotated>270</defaultAngleRotated>
								
								<angleRestricted>(180, 0)</angleRestricted>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>doorMG1</key>
							</li>
							<li>
								<turretDef>TGBM_WindowMinigun</turretDef>
								
								<renderProperties>
									<north>(1.3, 3)</north>
									<south>(-1.3, -2)</south>
									<east>(3.24, -0.6)</east>
									<west>(-3.24, 0.6)</west>
								</renderProperties>
								
								<gizmoLabel>Gunner 2</gizmoLabel>
								
								<defaultAngleRotated>90</defaultAngleRotated>
								
								<angleRestricted>(360, 180)</angleRestricted>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>doorMG2</key>
							</li>
						</turrets>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Cherokee_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(5,12)</drawSize>
							<layer>2</layer>
							<shaderType>CutoutComplexPattern</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
		</value>
	</Operation>
		<!-- LOUIS ROTOR LAYER -->
		<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Louie"]/drawProperties/graphicOverlays/li/graphicData[texPath="Things/Vehicles/Tier3/Tier3_TransportHelicopter/Tier3_TransportHelicopter_RotorTop"]/layer</xpath>
		<value>
			<layer>2</layer>
		</value>
	</Operation>
		<!-- TIER 3 UPGRADES -->
		<Operation Class="PatchOperationFindMod">
		<mods>
			<li>VVE: Tier 3 Upgrades</li>
		</mods>
		<nomatch Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Louie"]/comps</xpath>
					<value>
						<li Class="Vehicles.CompProperties_UpgradeTree">
							<def>TGBM_VVE_Louie_UpgradeTree</def>
						</li>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Louie"]/comps</xpath>
					<value>
						<li Class="Vehicles.CompProperties_VehicleTurrets">
							<turrets/>
						</li>
					</value>
				</li>
			</operations>
		</nomatch>
	</Operation>
		<!-- CREW CAPACITY -->
		<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Louie"]/properties/roles/li[key="pilot"]/slots</xpath>
		<value>
			<slots>3</slots>
		</value>
	</Operation>
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Louie"]/properties/roles/li[key="passenger"]/slots</xpath>
		<value>
			<slots>15</slots>
		</value>
	</Operation>
		<!-- UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="SEX_Chopper_UpgradeTree" or defName="TGBM_VVE_Louie_UpgradeTree"]/nodes</xpath>
		<value>
			<li>
				<key>MachineGunMTwoFourty</key>
				<label>Medium machine gun</label>
				<description>Attach two medium machine guns to the vehicle's sides. Can be used by any passenger seat occupant.\n\nSome folks are born made to wave the flag...</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>10000</work>
				<gridCoordinate>(11, 6)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<ingredients>
					<Steel>300</Steel>
					<ComponentIndustrial>10</ComponentIndustrial>
				</ingredients>
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoHB</li>
					<li>MachineGunMinigun</li>
				</disableIfUpgradeNodesEnabled>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>passenger</key>
								<editKey>DoorGunMMG</editKey>
								<slots>5</slots>
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								<turretIds>
									<li>doorMG1</li>
									<li>doorMG2</li>
								</turretIds>
								<hitbox>
									<cells>
										<li>(0, 3)</li>
										<li>(1, 3)</li>
										<li>(-1, 2)</li>
										<li>(0, 2)</li>
										<li>(1, 2)</li>
									</cells>
								</hitbox>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_WisentMMG</turretDef>
								
								<renderProperties>
									<north>(-1.5, 2)</north>
									<south>(1.5, -2)</south>
									<east>(2, 1.2)</east>
									<west>(-2, -1.2)</west>
								</renderProperties>
								
								<gizmoLabel>Gunner 1</gizmoLabel>
								
								<defaultAngleRotated>270</defaultAngleRotated>
								
								<angleRestricted>(180, 0)</angleRestricted>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>doorMG1</key>
							</li>
							<li>
								<turretDef>TGBM_WisentMMG</turretDef>
								
								<renderProperties>
									<north>(1.5, 2)</north>
									<south>(-1.5, -2)</south>
									<east>(2, -1.2)</east>
									<west>(-2, 1.2)</west>
								</renderProperties>
								
								<gizmoLabel>Gunner 2</gizmoLabel>
								
								<defaultAngleRotated>90</defaultAngleRotated>
								
								<angleRestricted>(360, 180)</angleRestricted>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>doorMG2</key>
							</li>
						</turrets>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Louie_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(5,9)</drawSize>
							<layer>2</layer>
							<shaderType>CutoutComplexPattern</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
			<li>
				<key>MachineGunMTwoHB</key>
				<label>Heavy machine gun</label>
				<description>Attach two heavy machine guns to the vehicle's sides. Can be used by any passenger seat occupant.\n\nAnd when the band plays "Hail to the Chief"...</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>10000</work>
				<gridCoordinate>(11, 8)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<ingredients>
					<Steel>410</Steel>
					<ComponentIndustrial>12</ComponentIndustrial>
				</ingredients>
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMinigun</li>
				</disableIfUpgradeNodesEnabled>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>passenger</key>
								<editKey>DoorGunHMG</editKey>
								<slots>5</slots>
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								<turretIds>
									<li>doorMG1</li>
									<li>doorMG2</li>
								</turretIds>
								<hitbox>
									<cells>
										<li>(0, 3)</li>
										<li>(1, 3)</li>
										<li>(-1, 2)</li>
										<li>(0, 2)</li>
										<li>(1, 2)</li>
									</cells>
								</hitbox>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_WisentHMG</turretDef>
								
								<renderProperties>
									<north>(-1.5, 2)</north>
									<south>(1.5, -2)</south>
									<east>(2, 1.2)</east>
									<west>(-2, -1.2)</west>
								</renderProperties>
								
								<gizmoLabel>Gunner 1</gizmoLabel>
								
								<defaultAngleRotated>270</defaultAngleRotated>
								
								<angleRestricted>(180, 0)</angleRestricted>
								<aimPieOffset>(0, 0.4)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>doorMG1</key>
							</li>
							<li>
								<turretDef>TGBM_WisentHMG</turretDef>
								
								<renderProperties>
									<north>(1.5, 2)</north>
									<south>(-1.5, -2)</south>
									<east>(2, -1.2)</east>
									<west>(-2, 1.2)</west>
								</renderProperties>
								
								<gizmoLabel>Gunner 2</gizmoLabel>
								
								<defaultAngleRotated>90</defaultAngleRotated>
								
								<angleRestricted>(360, 180)</angleRestricted>
								<aimPieOffset>(0, 0.4)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>doorMG2</key>
							</li>
						</turrets>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Louie_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(5,9)</drawSize>
							<layer>2</layer>
							<shaderType>CutoutComplexPattern</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
			<li>
				<key>MachineGunMinigun</key>
				<label>Minigun</label>
				<description>Attach two miniguns to the vehicle's sides. Can be used by any passenger seat occupant.\n\nHoo, they're red, white and blue.</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>10000</work>
				<gridCoordinate>(13, 6)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<ingredients>
					<Steel>270</Steel>
					<ComponentIndustrial>22</ComponentIndustrial>
				</ingredients>
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
				</disableIfUpgradeNodesEnabled>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>passenger</key>
								<editKey>DoorGunRMG</editKey>
								<slots>5</slots>
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								<turretIds>
									<li>doorMG1</li>
									<li>doorMG2</li>
								</turretIds>
								<hitbox>
									<cells>
										<li>(0, 3)</li>
										<li>(1, 3)</li>
										<li>(-1, 2)</li>
										<li>(0, 2)</li>
										<li>(1, 2)</li>
									</cells>
								</hitbox>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedMinigun</turretDef>
								
								<renderProperties>
									<north>(-1.5, 2)</north>
									<south>(1.5, -2)</south>
									<east>(2, 1.2)</east>
									<west>(-2, -1.2)</west>
								</renderProperties>
								
								<gizmoLabel>Gunner 1</gizmoLabel>
								
								<defaultAngleRotated>270</defaultAngleRotated>
								
								<angleRestricted>(180, 0)</angleRestricted>
								<aimPieOffset>(0, 0.4)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>doorMG1</key>
							</li>
							<li>
								<turretDef>TGBM_ExposedMinigun</turretDef>
								
								<renderProperties>
									<north>(1.5, 2)</north>
									<south>(-1.5, -2)</south>
									<east>(2, -1.2)</east>
									<west>(-2, 1.2)</west>
								</renderProperties>
								
								<gizmoLabel>Gunner 2</gizmoLabel>
								
								<defaultAngleRotated>90</defaultAngleRotated>
								
								<angleRestricted>(360, 180)</angleRestricted>
								<aimPieOffset>(0, 0.4)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>doorMG2</key>
							</li>
						</turrets>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Louie_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(5,9)</drawSize>
							<layer>2</layer>
							<shaderType>CutoutComplexPattern</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
		</value>
	</Operation>
		<!-- MARSHAL GUNS AND DRAWLAYER -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Marshal"]/comps/li[@Class="Vehicles.CompProperties_VehicleTurrets"]/turrets/li[key="mainTurret"]</xpath>
		<value>
			<drawLayer>2</drawLayer>
		</value>
	</Operation>
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Marshal"]/comps/li[@Class="Vehicles.CompProperties_VehicleTurrets"]/turrets/li[key="mountedTurret"]/drawLayer</xpath>
		<value>
			<drawLayer>3</drawLayer>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Marshal"]/properties/roles/li[key="gunner"]/turretIds</xpath>
		<value>
			<li>coaxialMG</li>
		</value>
	</Operation>
		<!-- COMMANDER -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Marshal"]/properties/roles</xpath>
		<value>
			<li>
				<key>commander</key>
				<label>Commander</label>
				<slots>1</slots>
				<slotsToOperate>1</slotsToOperate>
				
				<handlingTypes>Turret</handlingTypes>
					
				<turretIds>
					<li>pintleMG</li>
				</turretIds>
					
				<hitbox>
					<cells>
						<li>(0, 0)</li>
					</cells>
				</hitbox>
			</li>
		</value>
	</Operation>
		<!-- STOCK WEAPONS -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Marshal"]/comps/li[@Class="Vehicles.CompProperties_VehicleTurrets"]/turrets</xpath>
		<value>
			<li>
				<turretDef>TGBM_VVECoaxialMMG</turretDef>
				
				<renderProperties>
					<north>(-0.37, 1.15)</north>
					<south>(0.37, -1.15)</south>
					<east>(1.15, 0.37)</east>
				</renderProperties>
						
				<gizmoLabel>coaxial machine gun</gizmoLabel>		
				
				<angleRestricted>(345,15)</angleRestricted>
				<aimPieOffset>(0, 0)</aimPieOffset>
				<key>coaxialMG</key>
				
				<drawLayer>1</drawLayer>		
				<parentKey>mainTurret</parentKey>
			</li>
			<li>
				<turretDef>TGBM_VVEPintleMMG</turretDef>
				
				<renderProperties>
					<north>(-0.5, -0.1)</north>
					<south>(0.5, 0.1)</south>
					<east>(-0.1, 0.5)</east>
				</renderProperties>
						
				<gizmoLabel>pintle-mounted machine gun</gizmoLabel>		
				
				<angleRestricted>(270,90)</angleRestricted>
				<aimPieOffset>(0, 0)</aimPieOffset>
				<key>pintleMG</key>
				
				<drawLayer>3</drawLayer>		
				
				<parentKey>mainTurret</parentKey>
			</li>
		</value>
	</Operation>
		<!-- TIER 3 UPGRADES & CE -->
		<Operation Class="PatchOperationFindMod">
		<mods>
			<li>VVE: Tier 3 Upgrades</li>
		</mods>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Marshal"]/comps</xpath>
			<value>
				<li Class="Vehicles.CompProperties_UpgradeTree">
					<def>TGBM_VVE_Marshal_UpgradeTree</def>
				</li>
			</value>
		</nomatch>
	</Operation>
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Combat Extended</li>
		</mods>
		<match Class="PatchOperationAdd">
			<xpath>Defs/Vehicles.UpgradeTreeDef[defName="SEX_T3_Tank_UpgradeTree" or defName="TGBM_VVE_Marshal_UpgradeTree"]/nodes</xpath>
			<value>
				<!-- Only the Combat Extended exclusive M2A1 Browning, for now -->
				<li>
					<key>MachineGunMTwoHB</key>
					<label>Improved mounted machine gun</label>
					<description>Replace the mounted turret's MMG with a larger HMG.\n\nUseful against groups of enemies and even light vehicles. Needs to be fired from the machine-gunner's seat.\n\nWhen Ma Deuce speaks, everybody listens!\n\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; .50 BMG</description>
					<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_TurretImproved</icon>
					<work>5000</work>
					<gridCoordinate>(12, 7)</gridCoordinate>
					<drawSize>(80, 80)</drawSize>
					<ingredients>
						<Steel>100</Steel>
						<ComponentIndustrial>3</ComponentIndustrial>
					</ingredients>
					<upgrades>
						<li Class="Vehicles.TurretUpgrade">
							<turrets>
								<li>
									<turretDef>TGBM_Marshal_PintleHMG</turretDef>
									
									<renderProperties>
										<north>(0.5, -0.63)</north>
										<south>(-0.5, 0.63)</south>
										<east>(-0.63, -0.5)</east>
									</renderProperties>
									
									<defaultAngleRotated>270</defaultAngleRotated>
									
									<gizmoLabel>Mounted Turret</gizmoLabel>
									
									<angleRestricted/>
									<aimPieOffset>(0, 0.2)</aimPieOffset>
									<drawLayer>3</drawLayer>
									
									<key>mountedTurret</key>
									<parentKey>mainTurret</parentKey>
								</li>
							</turrets>
							<removeTurrets>
								<li>mountedTurret</li>
							</removeTurrets>
						</li>
					</upgrades>
				</li>
			</value>
		</match>
	</Operation>
		<!-- NOMAD TIER 3 UPGRADES -->
		<Operation Class="PatchOperationFindMod">
		<mods>
			<li>VVE: Tier 3 Upgrades</li>
		</mods>
		<nomatch Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Nomad"]/comps</xpath>
					<value>
						<li Class="Vehicles.CompProperties_UpgradeTree">
							<def>TGBM_VVE_Nomad_UpgradeTree</def>
						</li>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Nomad"]/comps</xpath>
					<value>
						<li Class="Vehicles.CompProperties_VehicleTurrets">
							<turrets/>
						</li>
					</value>
				</li>
			</operations>
		</nomatch>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="SEX_Humvee_UpgradeTree" or defName="TGBM_VVE_Nomad_UpgradeTree"]/nodes</xpath>
		<value>
			<li>
				<key>MachineGunMTwoFourty</key>
				<label>Medium machine gun</label>
				<description>Attach a medium machine gun to the roof of the vehicle with all the required peripherals, including an extra seat for the gunner.\n\nThe medium machine gun is designed for the indecisive logistics manager, being average in most aspects for its type.</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>5000</work>
				<gridCoordinate>(17, 6)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoHB</li>
					<li>MachineGunMTwoFourtyNine</li>
					<li>MachineGunMarkNineteen</li>
				</disableIfUpgradeNodesEnabled>
				<ingredients>
					<Steel>150</Steel>
					<ComponentIndustrial>5</ComponentIndustrial>
				</ingredients>
				<upgrades>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_NomadMMG</turretDef>
								
								<renderProperties>
									<north>(0, 0.65)</north>
									<south>(0, 0.65)</south>
									<east>(0, 0.45)</east>
									<west>(0, 0.45)</west>
								</renderProperties>
								
								<gizmoLabel>Mounted turret</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 0.2)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>mainTurret</key>
							</li>
						</turrets>
					</li>
					<li Class = "Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<label>Gunner</label>
								
								<slots>1</slots>
								<slotsToOperate>1</slotsToOperate>
								
								<handlingTypes>Turret</handlingTypes>

								<turretIds>
									<li>mainTurret</li>
								</turretIds>

								<hitbox>
									<cells>
										<li>(0, 0)</li>
									</cells>
								</hitbox>
							</li>
						</roles>
					</li>
				</upgrades>
			</li>
			<li>
				<key>MachineGunMTwoHB</key>
				<label>Heavy machine gun</label>
				<description>Attach a heavy machine gun to the roof of the vehicle with all the required peripherals, including an extra seat for the gunner.\n\nThe heavy machine gun has medium capacity and range, but is powerful enough to cut a man in half.</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>5000</work>
				<gridCoordinate>(17, 8)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoFourtyNine</li>
					<li>MachineGunMarkNineteen</li>
				</disableIfUpgradeNodesEnabled>
				<ingredients>
					<Steel>210</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				<upgrades>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_NomadHMG</turretDef>
								
								<renderProperties>
									<north>(0, 0.65)</north>
									<south>(0, 0.65)</south>
									<east>(0, 0.45)</east>
									<west>(0, 0.45)</west>
								</renderProperties>
								
								<gizmoLabel>Mounted turret</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 0.2)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>mainTurret</key>
							</li>
						</turrets>
					</li>
					<li Class = "Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<label>Gunner</label>
								
								<slots>1</slots>
								<slotsToOperate>1</slotsToOperate>
								
								<handlingTypes>Turret</handlingTypes>

								<turretIds>
									<li>mainTurret</li>
								</turretIds>

								<hitbox>
									<cells>
										<li>(0, 0)</li>
									</cells>
								</hitbox>
							</li>
						</roles>
					</li>
				</upgrades>
			</li>
			<li>
				<key>MachineGunMTwoFourtyNine</key>
				<label>Light machine gun</label>
				<description>Attach a light machine gun to the roof of the vehicle with all the required peripherals, including an extra seat for the gunner.\n\nThe light machine gun is a fast-firing, high-capacity but short-ranged weapon, which makes it good for urban combat.</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>5000</work>
				<gridCoordinate>(19, 6)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
					<li>MachineGunMarkNineteen</li>
				</disableIfUpgradeNodesEnabled>
				<ingredients>
					<Steel>125</Steel>
					<ComponentIndustrial>5</ComponentIndustrial>
				</ingredients>
				<upgrades>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_NomadLMG</turretDef>
								
								<renderProperties>
									<north>(0, 0.65)</north>
									<south>(0, 0.65)</south>
									<east>(0, 0.45)</east>
									<west>(0, 0.45)</west>
								</renderProperties>
								
								<gizmoLabel>Mounted turret</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 0.2)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>mainTurret</key>
							</li>
						</turrets>
					</li>
					<li Class = "Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<label>Gunner</label>
								
								<slots>1</slots>
								<slotsToOperate>1</slotsToOperate>
								
								<handlingTypes>Turret</handlingTypes>

								<turretIds>
									<li>mainTurret</li>
								</turretIds>

								<hitbox>
									<cells>
										<li>(0, 0)</li>
									</cells>
								</hitbox>
							</li>
						</roles>
					</li>
				</upgrades>
			</li>
			<li>
				<key>MachineGunMarkNineteen</key>
				<label>Grenade machine gun</label>
				<description>Attach an automatic grenade launcher turret to the roof of the vehicle with all the required peripherals, including an extra seat for the gunner.\n\nIt is as destructive as its name suggests, the grenade machine gun is effective in the field, but not recommended for urban combat.</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>5000</work>
				<gridCoordinate>(19, 8)</gridCoordinate>
				<drawSize>(40, 40)</drawSize>
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
					<li>MachineGunMTwoFourtyNine</li>
				</disableIfUpgradeNodesEnabled>
				<ingredients>
					<Steel>130</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				<upgrades>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_NomadGMG</turretDef>
								
								<renderProperties>
									<north>(0, 0.65)</north>
									<south>(0, 0.65)</south>
									<east>(0, 0.45)</east>
									<west>(0, 0.45)</west>
								</renderProperties>
								
								<gizmoLabel>Mounted turret</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>mainTurret</key>
							</li>
						</turrets>
					</li>
					<li Class = "Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<label>Gunner</label>
								
								<slots>1</slots>
								<slotsToOperate>1</slotsToOperate>
								
								<handlingTypes>Turret</handlingTypes>

								<turretIds>
									<li>mainTurret</li>
								</turretIds>

								<hitbox>
									<cells>
										<li>(0, 0)</li>
									</cells>
								</hitbox>
							</li>
						</roles>
					</li>
				</upgrades>
			</li>
		</value>
	</Operation>
		<!-- PALADIN PASSENGER -->
		<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Paladin"]/properties/roles/li[key="passenger"]/slots</xpath>
		<value>
			<slots>9</slots>
		</value>
	</Operation>
		<!-- TIER 3 UPGRADES -->
		<Operation Class="PatchOperationFindMod">
		<mods>
			<li>VVE: Tier 3 Upgrades</li>
		</mods>
		<match Class="PatchOperationReplace">
			<xpath>Defs/Vehicles.UpgradeTreeDef[defName="SEX_T3_LAV_UpgradeTree"]/nodes/li[key="SEX_LAV_ExpandedCabin"]/upgrades/li[@Class="Vehicles.VehicleUpgrade"]/roles/li[key="passenger"]/slots</xpath>
			<value>
				<slots>11</slots>
			</value>
		</match>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Paladin"]/comps</xpath>
			<value>
				<li Class="Vehicles.CompProperties_UpgradeTree">
					<def>TGBM_VVE_Paladin_UpgradeTree</def>
				</li>
			</value>
		</nomatch>
	</Operation>
		<!-- SECONDARY WEAPONS UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="SEX_T3_LAV_UpgradeTree" or defName="TGBM_VVE_Paladin_UpgradeTree"]/nodes</xpath>
		<value>
			<li>
				<key>TankTurret</key> <!-- M1128 MGS -->
				<label>Tank turret</label>
				<description>Convert the vehicle to a self-propelled gun, taking up all passenger space. The turret comes with smoke grenade launchers and a heavy machine gun.</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_TurretImproved</icon>
				<work>9000</work>
				
				<ingredients>
					<Steel>500</Steel>
					<ComponentIndustrial>8</ComponentIndustrial>
				</ingredients>
				
				<gridCoordinate>(24, 7)</gridCoordinate>
				<drawSize>(80, 80)</drawSize>
				
				<disableIfUpgradeNodesEnabled>
					<li MayRequire="IDontEvenReally.WannaDoThis.Anymore">SEX_LAV_EscortPackage</li>
				</disableIfUpgradeNodesEnabled>
				
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>passenger</key>
								<editKey>AntiTankTurretPassenger</editKey>
								<slots>1</slots>
							</li>
							<li>
								<key>gunner</key>
								<editKey>AntiTankTurretGunner</editKey>
								<label>Gunner</label>
								<slots>1</slots>
								<slotsToOperate>1</slotsToOperate>
								
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>mainTurret</li>
									<li>coaxialMG</li>
								</turretIds>
								
								<hitbox>
									<cells>
										<li>(0, 1)</li>
									</cells>
								</hitbox>
							</li>
						</roles>
					</li>
					<li Class = "Vehicles.CompUpgrade">
						<activate>
							<li Class="VanillaVehiclesExpanded.CompProperties_ReloadableWithVerbs">
								<maxCharges>3</maxCharges>
								<ammoDef>Chemfuel</ammoDef>
								<ammoCountToRefill>10</ammoCountToRefill>
								<soundReload>Standard_Reload</soundReload>
								<hotKey>Misc4</hotKey>
								<chargeNoun>smokepop</chargeNoun>
								<displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
								<verbs>
									<li>
										<verbClass>VanillaVehiclesExpanded.Verb_Smokepop</verbClass>
										<label>pop smoke</label>
										<violent>false</violent>
										<hasStandardCommand>true</hasStandardCommand>
										<commandIcon>UI/ActivateBlindsmokePop</commandIcon>
										<targetable>false</targetable>
										<nonInterruptingSelfCast>true</nonInterruptingSelfCast>
										<onlyManualCast>True</onlyManualCast>
									</li>
								</verbs>
								<commandDescriptions>
									<li>A defensive smokescreen. When activated, it will release a cloud of smoke, obscuring incoming shots and preventing turrets from locking on. Has three charges and will require a chemfuel reload after they are spent. Right click to reload.</li>
								</commandDescriptions>
							</li>
						</activate>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_Paladin_MGSTurret</turretDef>
						
								<renderProperties>
									<north>(0, -0.55)</north>
									<south>(0, 1.25)</south>
									<east>(-1.25, 0.5)</east>
								</renderProperties>
								
								<gizmoLabel>Main Turret</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 4.5)</aimPieOffset>
								
								<key>mainTurret</key>
								<drawLayer>2</drawLayer>	
							</li>
							<li>
								<turretDef>TGBM_WisentHMG</turretDef>
								
								<renderProperties>
									<north>(0, 0.6)</north>
									<south>(0, -0.6)</south>
									<east>(0.6, 0)</east>
								</renderProperties>
										
								<gizmoLabel>machine gun</gizmoLabel>		
								
								<defaultAngleRotated>270</defaultAngleRotated>
								
								<angleRestricted>(315,45)</angleRestricted>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<key>coaxialMG</key>
								
								<drawLayer>3</drawLayer>		
								<parentKey>mainTurret</parentKey>
							</li>
						</turrets>
						<removeTurrets>
							<li>mainTurret</li>
						</removeTurrets>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Paladin_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(4,7)</drawSize>
							<layer>1</layer>
							<shaderType>CutoutComplexPattern</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
			<li>
				<key>CavalryTurret</key> <!-- M1296 Dragoon -->
				<label>Autocannon turret</label>
				<description>Replace the simple remote-controlled grenade launcher with an improved autocannon turret. Comes with smoke grenade launchers and can fire explosive shells.</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_TurretImproved</icon>
				<work>9000</work>
				
				<ingredients>
					<Steel>300</Steel>
					<ComponentIndustrial>8</ComponentIndustrial>
				</ingredients>
				
				<gridCoordinate>(18, 7)</gridCoordinate>
				<drawSize>(80, 80)</drawSize>
				
				<disableIfUpgradeNodesEnabled>
					<li MayRequire="IDontEvenReally.WannaDoThis.Anymore">SEX_LAV_EscortPackage</li>
				</disableIfUpgradeNodesEnabled>
				
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<editKey>CavalryTurretGunner</editKey>
								<label>Gunner</label>
								<slots>2</slots>
								<slotsToOperate>1</slotsToOperate>
								
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>mainTurret</li>
									<li>coaxialMG</li>
								</turretIds>
								
								<hitbox>
									<cells>
										<li>(0, 1)</li>
									</cells>
								</hitbox>
							</li>
						</roles>
					</li>
					<li Class = "Vehicles.CompUpgrade">
						<activate>
							<li Class="VanillaVehiclesExpanded.CompProperties_ReloadableWithVerbs">
								<maxCharges>3</maxCharges>
								<ammoDef>Chemfuel</ammoDef>
								<ammoCountToRefill>10</ammoCountToRefill>
								<soundReload>Standard_Reload</soundReload>
								<hotKey>Misc4</hotKey>
								<chargeNoun>smokepop</chargeNoun>
								<displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
								<verbs>
									<li>
										<verbClass>VanillaVehiclesExpanded.Verb_Smokepop</verbClass>
										<label>pop smoke</label>
										<violent>false</violent>
										<hasStandardCommand>true</hasStandardCommand>
										<commandIcon>UI/ActivateBlindsmokePop</commandIcon>
										<targetable>false</targetable>
										<nonInterruptingSelfCast>true</nonInterruptingSelfCast>
										<onlyManualCast>True</onlyManualCast>
									</li>
								</verbs>
								<commandDescriptions>
									<li>A defensive smokescreen. When activated, it will release a cloud of smoke, obscuring incoming shots and preventing turrets from locking on. Has three charges and will require a chemfuel reload after they are spent. Right click to reload.</li>
								</commandDescriptions>
							</li>
						</activate>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_Paladin_DragoonTurret</turretDef>
						
								<renderProperties>
									<north>(0, -0.55)</north>
									<south>(0, 1.25)</south>
									<east>(-1.25, 0.5)</east>
								</renderProperties>
								
								<gizmoLabel>Main Turret</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 1.6)</aimPieOffset>
								
								<key>mainTurret</key>
								<drawLayer>2</drawLayer>	
							</li>
							<li>
								<turretDef>TGBM_VVEPintleMMG</turretDef>
								
								<renderProperties>
									<north>(0, 0.6)</north>
									<south>(0, -0.6)</south>
									<east>(0.6, 0)</east>
								</renderProperties>
										
								<gizmoLabel>machine gun</gizmoLabel>		
								
								<defaultAngleRotated>270</defaultAngleRotated>
								
								<angleRestricted>(315,45)</angleRestricted>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<key>coaxialMG</key>
								
								<drawLayer>3</drawLayer>		
								<parentKey>mainTurret</parentKey>
							</li>
						</turrets>
						<removeTurrets>
							<li>mainTurret</li>
						</removeTurrets>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Paladin_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(4,7)</drawSize>
							<layer>1</layer>
							<shaderType>CutoutComplexPattern</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
		</value>
	</Operation>
		<!-- UPGRADES NO CE -->
		<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Combat Extended</li>
		</mods>
		<nomatch Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.UpgradeTreeDef[defName="SEX_T3_LAV_UpgradeTree" or defName="TGBM_VVE_Paladin_UpgradeTree"]/nodes/li[key="TankTurret" or key="CavalryTurret"]/disableIfUpgradeNodesEnabled</xpath>
					<value>
						<li>GrenadeTurretEMP</li>
						<li>GrenadeTurretExplosive</li>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.UpgradeTreeDef[defName="SEX_T3_LAV_UpgradeTree" or defName="TGBM_VVE_Paladin_UpgradeTree"]/nodes</xpath>
					<value>
						<!-- Use mainTurret_A instead of mainTurret due to a bug with turret positioning. -->
						<li>
							<key>GrenadeTurretEMP</key>
							<label>EMP grenades</label>
							<description>Use EMP instead of smoke grenades. Must be reloaded with steel.</description>
							<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
							<work>1000</work>
							
							<gridCoordinate>(29, 6)</gridCoordinate>
							<drawSize>(40, 40)</drawSize>
							
							<disableIfUpgradeNodesEnabled>
								<li>CavalryTurret</li>
								<li>AntiTankTurret</li>
								<li>GrenadeTurretExplosive</li>
							</disableIfUpgradeNodesEnabled>
							
							<upgrades>
								<li Class="Vehicles.VehicleUpgrade">
									<roles>
										<li>
											<editKey>gunnerAmmoType</editKey>
											<key>gunner</key>
											<label>Gunner</label>
											<slots>1</slots>
											<slotsToOperate>1</slotsToOperate>
											
											<handlingTypes>Turret</handlingTypes>
											
											<turretIds>
												<li>mainTurret_A</li>
											</turretIds>
											
											<hitbox>
												<cells>
													<li>(0, 1)</li>
												</cells>
											</hitbox>
										</li>
									</roles>
								</li>
								<li Class="Vehicles.TurretUpgrade">
									<turrets>
										<li>
											<turretDef>TGBM_PaladinTurret_EMP</turretDef>
											
											<renderProperties>
												<north>(0.38, 0.65)</north>
												<south>(-0.36, 0.25)</south>
												<east>(-0.18, 0.2)</east>
											</renderProperties>
											
											<gizmoLabel>Main Turret</gizmoLabel>
											
											<angleRestricted/>
											<aimPieOffset>(0, 0.25)</aimPieOffset>
											
											<key>mainTurret_A</key>
										</li>
									</turrets>
									<removeTurrets>
										<li>mainTurret</li>
									</removeTurrets>
								</li>
							</upgrades>
						</li>
						<li>
							<key>GrenadeTurretExplosive</key>
							<label>Explosive grenades</label>
							<description>Use explosive instead of smoke grenades. Must be reloaded with chemfuel.</description>
							<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
							<work>1000</work>
							
							<gridCoordinate>(31, 6)</gridCoordinate>
							<drawSize>(40, 40)</drawSize>
							
							<disableIfUpgradeNodesEnabled>
								<li>CavalryTurret</li>
								<li>AntiTankTurret</li>
								<li>GrenadeTurretEMP</li>
							</disableIfUpgradeNodesEnabled>
							
							<upgrades>
								<li Class="Vehicles.VehicleUpgrade">
									<roles>
										<li>
											<editKey>gunnerAmmoType</editKey>
											<key>gunner</key>
											<label>Gunner</label>
											<slots>1</slots>
											<slotsToOperate>1</slotsToOperate>
											
											<handlingTypes>Turret</handlingTypes>
											
											<turretIds>
												<li>mainTurret_A</li>
											</turretIds>
											
											<hitbox>
												<cells>
													<li>(0, 1)</li>
												</cells>
											</hitbox>
										</li>
									</roles>
								</li>
								<li Class="Vehicles.TurretUpgrade">
									<turrets>
										<li>
											<turretDef>TGBM_PaladinTurret_Explosive</turretDef>
											
											<renderProperties>
												<north>(0.38, 0.65)</north>
												<south>(-0.36, 0.25)</south>
												<east>(-0.18, 0.2)</east>
											</renderProperties>
											
											<gizmoLabel>Main Turret</gizmoLabel>
											
											<angleRestricted/>
											<aimPieOffset>(0, 0.25)</aimPieOffset>
											
											<key>mainTurret_A</key>
										</li>
									</turrets>
									<removeTurrets>
										<li>mainTurret</li>
									</removeTurrets>
								</li>
							</upgrades>
						</li>
					</value>
				</li>
			</operations>
		</nomatch>
	</Operation>
		<!-- SPRINGBOK CREW CAPACITY -->
		<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Springbok"]/properties/roles/li[key="passenger"]/slots</xpath>
		<value>
			<slots>4</slots>
		</value>
	</Operation>
		<!-- UDAR TIER 3 UPGRADES -->
		<Operation Class="PatchOperationFindMod">
		<mods>
			<li>VVE: Tier 3 Upgrades</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Udar"]/properties/roles/li[key="driver"]</xpath>
					<value>
						<turretIds>
							<li>hullMG</li>
						</turretIds>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Udar"]/properties/roles/li[key="driver"]/handlingTypes</xpath>
					<value>
						<li>Turret</li>
					</value>
				</li>
			</operations>
		</match>
		<nomatch Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Udar"]/properties/roles/li[key="driver"]</xpath>
					<value>
						<turretIds>
							<li>hullMG</li>
						</turretIds>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Udar"]/properties/roles/li[key="driver"]/handlingTypes</xpath>
					<value>
						<li>Turret</li>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Udar"]/comps</xpath>
					<value>
						<li Class="Vehicles.CompProperties_UpgradeTree">
							<def>TGBM_VVE_Udar_UpgradeTree</def>
						</li>
					</value>
				</li>
			</operations>
		</nomatch>
	</Operation>
		<!-- UPGRADES -->
		<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="SEX_SiegeEngine_UpgradeTree" or defName="TGBM_VVE_Udar_UpgradeTree"]/nodes</xpath>
		<value>
			<li>
				<key>BowAutocannon</key>
				<label>Bow autocannon</label>
				<description>Install a defense autocannon to the front of the vehicle's hull, which can be used from the driver seat Has a limited line of sight, requiring the driver to turn the vehicle before firing.</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>7500</work>
				<gridCoordinate>(18, 7)</gridCoordinate>
				<drawSize>(80, 80)</drawSize>
				<ingredients>
					<Steel>100</Steel>
					<ComponentIndustrial>2</ComponentIndustrial>
				</ingredients>
				<upgrades>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_UdarAutocannon</turretDef>
								
								<renderProperties>
									<north>(0.45,2.12)</north>
									<south>(0.4,-1.9)</south>
									<east>(2.15,-0.2)</east>
									<west>(-2.15,0.2)</west>
								</renderProperties>
								
								<gizmoLabel>bow-mounted autocannon</gizmoLabel>
								
								<angleRestricted>(345,15)</angleRestricted>
								<aimPieOffset>(0, -0.2)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>hullMG</key>
							</li>
						</turrets>
					</li>
				</upgrades>
			</li>
		</value>
	</Operation>
		<!-- TIER 3 TWEAKS -->
		<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleTurretDef[defName="Paladin_MainTurret"]/warmUpTimer</xpath>
		<value>
			<warmUpTimer>1.5</warmUpTimer>
		</value>
	</Operation>
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/Vehicles.VehicleTurretDef[defName="Paladin_MainTurret"]/fireModes</xpath>
		<value>
			<fireModes>
				<li>
				<shotsPerBurst>1</shotsPerBurst>
				<ticksBetweenShots>120</ticksBetweenShots>
				<ticksBetweenBursts>120</ticksBetweenBursts>
				<spreadRadius>2.9</spreadRadius>
				<label>Single</label>
				<texPath>UI/Gizmos/FireRate_Single</texPath>
			</li>
			<li>
				<shotsPerBurst>3</shotsPerBurst>
				<ticksBetweenShots>10</ticksBetweenShots>
				<ticksBetweenBursts>60</ticksBetweenBursts>
				<spreadRadius>5.9</spreadRadius>
				<label>Burst</label>
				<texPath>UI/Gizmos/FireRate_Burst</texPath>
			</li>
			</fireModes>
		</value>
	</Operation>
		<!-- UNAFFECTED BY TIER 3 UPGRADES MOD -->
		<Operation Class="PatchOperationFindMod">
		<mods>
			<li>VVE: Tier 3 Upgrades</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Burya"]/comps</xpath>
					<value>
						<li Class = "Vehicles.CompProperties_UpgradeTree">
							<def>SEX_GenericUpgradeTree</def>
						</li>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Goliath"]/comps</xpath>
					<value>
						<li Class = "Vehicles.CompProperties_UpgradeTree">
							<def>SEX_GenericUpgradeTreeAircraft</def>
						</li>
					</value>
				</li>
			</operations>
		</match>
	</Operation>
		<!-- AFFECTED BY TIER 3 UPGRADES MOD -->
		<Operation Class="PatchOperationFindMod">
		<mods>
			<li>VVE: Tier 3 Upgrades</li>
		</mods>
		<nomatch Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Badger"]/comps</xpath>
					<value>
						<li Class = "Vehicles.CompProperties_UpgradeTree">
							<def>TGBM_VVE_HeavyACommonUpgradeTree</def>
						</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_BigRig"]/comps</xpath>
					<value>
						<li Class = "Vehicles.CompProperties_UpgradeTree">
							<def>TGBM_VVE_HeavyCommonUpgradeTree</def>
						</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Burya"]/comps</xpath>
					<value>
						<li Class = "Vehicles.CompProperties_UpgradeTree">
							<def>TGBM_VVE_HeavyCommonUpgradeTree</def>
						</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Cherokee"]/comps</xpath>
					<value>
						<li Class = "Vehicles.CompProperties_UpgradeTree">
							<def>TGBM_VVE_Cherokee_UpgradeTree</def>
						</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Goliath"]/comps</xpath>
					<value>
						<li Class = "Vehicles.CompProperties_UpgradeTree">
							<def>TGBM_VVE_HeavyCommonUpgradeTree</def>
						</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Hermano"]/comps</xpath>
					<value>
						<li Class = "Vehicles.CompProperties_UpgradeTree">
							<def>TGBM_VVE_HeavyCommonUpgradeTree</def>
						</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Lightning"]/comps</xpath>
					<value>
						<li Class = "Vehicles.CompProperties_UpgradeTree">
							<def>TGBM_VVE_HeavyCommonUpgradeTree</def>
						</li>
					</value>
				</li>
				
				<li Class="PatchOperationAdd">
					<xpath>Defs/Vehicles.VehicleDef[defName="VVE_Springbok"]/comps</xpath>
					<value>
						<li Class = "Vehicles.CompProperties_UpgradeTree">
							<def>TGBM_VVE_MediumCommonUpgradeTree</def>
						</li>
					</value>
				</li>
			</operations>
		</nomatch>
	</Operation>
		<!--  -->
		<!--  -->
		<!--  -->
		<!--  -->
		<!--  -->
		<!--  -->
		<!--  -->
		<!--  -->
		<!--  -->
		<!--  -->
		<!--  -->
	<!--  -->
	<!--  -->
	<!--  -->
	<!--  -->
	<!--  -->
</Patch>