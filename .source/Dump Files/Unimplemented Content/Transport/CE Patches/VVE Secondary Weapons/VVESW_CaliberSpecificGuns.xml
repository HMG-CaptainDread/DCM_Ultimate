<?xml version="1.0" encoding="utf-8"?>
<Patch>
	<!-- ============== Combat Extended caliber-specific weapons which would be redundant in Vanilla ============== -->
	<!-- ======= Tier 1 ======= -->
	<!-- === Dinghy === -->
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="TGBM_VVE_Dinghy_UpgradeTree"]/nodes</xpath>
		<value>
			<!-- CE caliber-specific -->
			<li>
				<key>MachineGunMaxim</key>
				<label>Maxim gun</label>
				<description>Add a Maxim machine gun to the bow of the vessel. Used from the Passenger 5 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -18kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 7.62x54mmR</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>3000</work>
				<ingredients>
					<Steel>150</Steel>
					<ComponentIndustrial>5</ComponentIndustrial>
				</ingredients>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
					<li>MachineGunGrenade</li>
					<li>RecoillessLauncherCG</li>
					<li>MachineGunDShK</li>
					<li>MachineGunGrenadeAGS</li>
					<li>RecoillessLauncherSPG</li>
				</disableIfUpgradeNodesEnabled>
				
				<gridCoordinate>(5, 20)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>Passenger_TopLeft</key>
								<editKey>passengerTopLeftEdit</editKey>
								<label>Passenger 4</label>
								<slots>1</slots>
								<pawnRenderer>
									<layer>1</layer>
									<layerSouth>2</layerSouth>
									<drawOffsetNorth>(-0.4, 0, 0.9)</drawOffsetNorth>
									<drawOffsetSouth>(0.4, 0, -0.9)</drawOffsetSouth>
									<drawOffsetEast>(0.7, 0, 0.8)</drawOffsetEast>
								</pawnRenderer>
							</li>
							<li>
								<key>Passenger_TopRight</key>
								<editKey>gunnerMMG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								
								<turretIds>
									<li>bowTurret</li>
								</turretIds>
								
								<handlingTypes>Turret</handlingTypes>
								
								<pawnRenderer>
									<layer>1</layer>
									<layerEast>2</layerEast>
									<drawOffsetNorth>(0, 0, 1)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 0)</drawOffsetSouth>
									<drawOffsetEast>(0.8, 0, 0.3)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedMaxim</turretDef>
										
								<renderProperties>
									<north>(0, 2)</north>
									<south>(0, -1.8)</south>
									<east>(2, 0.2)</east>
								</renderProperties>
								
								<gizmoLabel>Bow light machine gun</gizmoLabel>
								
								<angleRestricted>(225, 135)</angleRestricted>
								
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>2</drawLayer>
								
								<key>bowTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-18</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
			</li>
			<li>
				<key>MachineGunDShK</key>
				<label>DShK machine gun</label>
				<description>Add a heavy machine gun to the bow of the vessel. Used from the Passenger 5 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -34kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 12.7x108mm</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>4000</work>
				<ingredients>
					<Steel>210</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoHB</li>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunGrenade</li>
					<li>RecoillessLauncherCG</li>
					<li>MachineGunMaxim</li>
					<li>MachineGunGrenadeAGS</li>
					<li>RecoillessLauncherSPG</li>
				</disableIfUpgradeNodesEnabled>
				
				<gridCoordinate>(5, 21)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>Passenger_TopLeft</key>
								<editKey>passengerTopLeftEdit</editKey>
								<label>Passenger 4</label>
								<slots>1</slots>
								<pawnRenderer>
									<layer>1</layer>
									<layerSouth>2</layerSouth>
									<drawOffsetNorth>(-0.4, 0, 0.9)</drawOffsetNorth>
									<drawOffsetSouth>(0.4, 0, -0.9)</drawOffsetSouth>
									<drawOffsetEast>(0.7, 0, 0.8)</drawOffsetEast>
								</pawnRenderer>
							</li>
							<li>
								<key>Passenger_TopRight</key>
								<editKey>gunnerHMG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								
								<turretIds>
									<li>bowTurret</li>
								</turretIds>
								
								<handlingTypes>Turret</handlingTypes>
								
								<pawnRenderer>
									<layer>1</layer>
									<layerEast>2</layerEast>
									<drawOffsetNorth>(0, 0, 1)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 0)</drawOffsetSouth>
									<drawOffsetEast>(0.8, 0, 0.3)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedDShK</turretDef>
										
								<renderProperties>
									<north>(0, 2)</north>
									<south>(0, -1.8)</south>
									<east>(2, 0.2)</east>
								</renderProperties>
								
								<gizmoLabel>Bow heavy machine gun</gizmoLabel>
								
								<angleRestricted>(225, 135)</angleRestricted>
								
								<aimPieOffset>(0, 0.4)</aimPieOffset>
								<drawLayer>2</drawLayer>
								
								<key>bowTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-34</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
			</li>
			<li>
				<key>MachineGunGrenadeAGS</key>
				<label>AGS-30 grenade machine gun</label>
				<description>Add a grenade machine gun to the bow of the vessel. Used from the Passenger 5 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -17.5kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 30x29mm Grenades</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>6000</work>
				<ingredients>
					<Steel>130</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
					<li>RecoillessLauncherCG</li>
					<li>MachineGunMaxim</li>
					<li>MachineGunDShK</li>
					<li>RecoillessLauncherSPG</li>
				</disableIfUpgradeNodesEnabled>
				
				<gridCoordinate>(6, 20)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>Passenger_TopLeft</key>
								<editKey>passengerTopLeftEdit</editKey>
								<label>Passenger 4</label>
								<slots>1</slots>
								<pawnRenderer>
									<layer>1</layer>
									<layerSouth>2</layerSouth>
									<drawOffsetNorth>(-0.4, 0, 0.9)</drawOffsetNorth>
									<drawOffsetSouth>(0.4, 0, -0.9)</drawOffsetSouth>
									<drawOffsetEast>(0.7, 0, 0.8)</drawOffsetEast>
								</pawnRenderer>
							</li>
							<li>
								<key>Passenger_TopRight</key>
								<editKey>gunnerGMG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								
								<turretIds>
									<li>bowTurret</li>
								</turretIds>
								
								<handlingTypes>Turret</handlingTypes>
								
								<pawnRenderer>
									<layer>1</layer>
									<layerEast>2</layerEast>
									<drawOffsetNorth>(0, 0, 1)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 0)</drawOffsetSouth>
									<drawOffsetEast>(0.8, 0, 0.3)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedAGSThirty</turretDef>
										
								<renderProperties>
									<north>(0, 2)</north>
									<south>(0, -1.8)</south>
									<east>(2, 0.2)</east>
								</renderProperties>
								
								<gizmoLabel>Bow grenade machine gun</gizmoLabel>
								
								<angleRestricted>(225, 135)</angleRestricted>
								
								<aimPieOffset>(0, 0.2)</aimPieOffset>
								<drawLayer>2</drawLayer>
								
								<key>bowTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-17.5</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
			</li>
			<li>
				<key>RecoillessLauncherSPG</key>
				<label>SPG-9 recoilless launcher</label>
				<description>Add an anti-tank recoilless launcher to the bow of the vessel. Used from the Passenger 5 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -60kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; SPG-9 Rockets</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>5000</work>
				<ingredients>
					<Steel>75</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
					<li>MachineGunGrenade</li>
					<li>MachineGunMaxim</li>
					<li>MachineGunDShK</li>
					<li>MachineGunGrenadeAGS</li>
				</disableIfUpgradeNodesEnabled>
				
				<gridCoordinate>(6, 21)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>Passenger_TopLeft</key>
								<editKey>passengerTopLeftEdit</editKey>
								<label>Passenger 4</label>
								<slots>1</slots>
								<pawnRenderer>
									<layer>1</layer>
									<layerSouth>2</layerSouth>
									<drawOffsetNorth>(-0.4, 0, 0.9)</drawOffsetNorth>
									<drawOffsetSouth>(0.4, 0, -0.9)</drawOffsetSouth>
									<drawOffsetEast>(0.7, 0, 0.8)</drawOffsetEast>
								</pawnRenderer>
							</li>
							<li>
								<key>Passenger_TopRight</key>
								<editKey>gunnerRLSPG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								
								<turretIds>
									<li>bowTurret</li>
								</turretIds>
								
								<handlingTypes>Turret</handlingTypes>
								
								<pawnRenderer>
									<layer>1</layer>
									<layerEast>2</layerEast>
									<drawOffsetNorth>(0, 0, 1)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 0)</drawOffsetSouth>
									<drawOffsetEast>(0.8, 0, 0.3)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedSPGNine</turretDef>
								
								<renderProperties>
									<north>(0, 2)</north>
									<south>(0, -1.8)</south>
									<east>(2, 0.2)</east>
								</renderProperties>
								
								<gizmoLabel>Bow recoilless rifle</gizmoLabel>
								
								<angleRestricted>(225, 135)</angleRestricted>
								
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>2</drawLayer>
								
								<key>bowTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-60</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
			</li>
		</value>
	</Operation>
	
	<!-- === Mule === -->	
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Vanilla Vehicles Expanded - Upgrades</li>
		</mods>
		<match Class="PatchOperationAdd">
			<xpath>Defs/Vehicles.UpgradeTreeDef[defName="VVE_Mule_UpgradeTree"]/nodes</xpath>
			<value>
				<!-- MGs -->
				<li>
					<key>MachineGunPKM</key>
					<label>PKM machine gun</label>
					<description>Attach a medium machine gun to the bed.\n\nCannot be used with bed canvas. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -7.5kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 7.62x54mmR</description>
					
					<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
					<work>3000</work>
					<disableIfUpgradeNodesEnabled>
						<li>ExpandedCargoSpace</li>
						<li>MachineGunMTwoFourty</li>
						<li>MachineGunMTwoHB</li>
						<li>GrenadeMachineGun</li>
						<li>RecoillessRifle</li>
						<li>MachineGunMaxim</li>
						<li>MachineGunDShK</li>
						<li>GrenadeMachineGunAGS</li>
						<li>RecoillessRifleSPG</li>
					</disableIfUpgradeNodesEnabled>
					<gridCoordinate>(5, 20)</gridCoordinate>
					<drawSize>(20, 20)</drawSize>
					<ingredients>
						<Steel>150</Steel>
						<ComponentIndustrial>5</ComponentIndustrial>
					</ingredients>
					<upgrades>
						<li Class="Vehicles.VehicleUpgrade">
							<roles>
								<li>
									<key>gunner</key>
									<editKey>gunnerMMG</editKey>
									
									<handlingTypes>Turret</handlingTypes>
									<slotsToOperate>1</slotsToOperate>
									
									
									<turretIds>
										<li>mainTurret</li>
									</turretIds>
									
									<pawnRenderer>
										<layer>1</layer>
										<drawOffsetNorth>(0, 0, 0)</drawOffsetNorth>
										<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
										<drawOffsetEast>(-1.9, 0, 0.5)</drawOffsetEast>
									</pawnRenderer>
								</li>
							</roles>
						</li>
						<li Class="Vehicles.TurretUpgrade">
							<turrets>
								<li>
									<turretDef>TGBM_ExposedPKM</turretDef>
											
									<renderProperties>
										<north>(0, 1.2)</north>
										<south>(0, 0.9)</south>
										<east>(-1, 0.6)</east>
									</renderProperties>
									
									<gizmoLabel>Medium machine gun</gizmoLabel>
									
									<angleRestricted/>
									<aimPieOffset>(0, 0)</aimPieOffset>
									<drawLayer>3</drawLayer>
									
									<key>mainTurret</key>
								</li>
							</turrets>
						</li>
						<li Class="Vehicles.StatUpgrade">
							<vehicleStats>
								<li>
									<def>CargoCapacity</def>
									<value>-7.5</value>
								</li>
							</vehicleStats>
						</li>
					</upgrades>
					<graphicOverlays>
						<li>
							<graphicData>
								<texPath>Things/Vehicles/TGBM_Extra/Mule_gunmount</texPath>
								<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
								<drawSize>(5,5)</drawSize>
								<layer>1</layer>
								<shaderType>Cutout</shaderType>
							</graphicData>
						</li>
					</graphicOverlays>
				</li>
				<li>
					<key>MachineGunMaxim</key>
					<label>Maxim machine gun</label>
					<description>Attach a Maxim gun to the bed.\n\nCannot be used with bed canvas. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -18kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 7.62x54mmR</description>
					
					<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
					<work>3000</work>
					<disableIfUpgradeNodesEnabled>
						<li>ExpandedCargoSpace</li>
						<li>MachineGunMTwoFourty</li>
						<li>MachineGunMTwoHB</li>
						<li>GrenadeMachineGun</li>
						<li>RecoillessRifle</li>
						<li>MachineGunPKM</li>
						<li>MachineGunDShK</li>
						<li>GrenadeMachineGunAGS</li>
						<li>RecoillessRifleSPG</li>
					</disableIfUpgradeNodesEnabled>
					<gridCoordinate>(5, 21)</gridCoordinate>
					<drawSize>(20, 20)</drawSize>
					<ingredients>
						<Steel>150</Steel>
						<ComponentIndustrial>5</ComponentIndustrial>
					</ingredients>
					<upgrades>
						<li Class="Vehicles.VehicleUpgrade">
							<roles>
								<li>
									<key>gunner</key>
									<editKey>gunnerMMG</editKey>
									
									<handlingTypes>Turret</handlingTypes>
									<slotsToOperate>1</slotsToOperate>
									
									
									<turretIds>
										<li>mainTurret</li>
									</turretIds>
									
									<pawnRenderer>
										<layer>1</layer>
										<drawOffsetNorth>(0, 0, 0)</drawOffsetNorth>
										<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
										<drawOffsetEast>(-1.9, 0, 0.5)</drawOffsetEast>
									</pawnRenderer>
								</li>
							</roles>
						</li>
						<li Class="Vehicles.TurretUpgrade">
							<turrets>
								<li>
									<turretDef>TGBM_ExposedMaxim</turretDef>
											
									<renderProperties>
										<north>(0, 1.2)</north>
										<south>(0, 0.9)</south>
										<east>(-1, 0.6)</east>
									</renderProperties>
									
									<gizmoLabel>Medium machine gun</gizmoLabel>
									
									<angleRestricted/>
									<aimPieOffset>(0, 0)</aimPieOffset>
									<drawLayer>3</drawLayer>
									
									<key>mainTurret</key>
								</li>
							</turrets>
						</li>
						<li Class="Vehicles.StatUpgrade">
							<vehicleStats>
								<li>
									<def>CargoCapacity</def>
									<value>-18</value>
								</li>
							</vehicleStats>
						</li>
					</upgrades>
					<graphicOverlays>
						<li>
							<graphicData>
								<texPath>Things/Vehicles/TGBM_Extra/Mule_gunmount</texPath>
								<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
								<drawSize>(5,5)</drawSize>
								<layer>1</layer>
								<shaderType>Cutout</shaderType>
							</graphicData>
						</li>
					</graphicOverlays>
				</li>
				<li>
					<key>MachineGunDShK</key>
					<label>DShK machine gun</label>
					<description>Attach a heavy machine gun to the bed.\n\nCannot be used with bed canvas. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -34kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 12.7x108mm</description>
					
					<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
					<work>4000</work>
					<disableIfUpgradeNodesEnabled>
						<li>ExpandedCargoSpace</li>
						<li>MachineGunMTwoHB</li>
						<li>MachineGunMTwoFourty</li>
						<li>GrenadeMachineGun</li>
						<li>RecoillessRifle</li>
						<li>MachineGunPKM</li>
						<li>MachineGunMaxim</li>
						<li>GrenadeMachineGunAGS</li>
						<li>RecoillessRifleSPG</li>
					</disableIfUpgradeNodesEnabled>
					<gridCoordinate>(6, 20)</gridCoordinate>
					<drawSize>(20, 20)</drawSize>
					<ingredients>
						<Steel>210</Steel>
						<ComponentIndustrial>6</ComponentIndustrial>
					</ingredients>
					<upgrades>
						<li Class="Vehicles.VehicleUpgrade">
							<roles>
								<li>
									<key>gunner</key>
									<editKey>gunnerHMG</editKey>
									
									<handlingTypes>Turret</handlingTypes>
									<slotsToOperate>1</slotsToOperate>
									
									
									<turretIds>
										<li>mainTurret</li>
									</turretIds>
									
									<pawnRenderer>
										<layer>1</layer>
										<drawOffsetNorth>(0, 0, -1)</drawOffsetNorth>
										<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
										<drawOffsetEast>(-1.9, 0, 0.5)</drawOffsetEast>
									</pawnRenderer>
								</li>
							</roles>
						</li>
						<li Class="Vehicles.TurretUpgrade">
							<turrets>
								<li>
									<turretDef>TGBM_ExposedDShK</turretDef>
											
									<renderProperties>
										<north>(0, 1.2)</north>
										<south>(0, 0.9)</south>
										<east>(-1, 0.6)</east>
									</renderProperties>
									
									<gizmoLabel>Heavy machine gun</gizmoLabel>
									
									<angleRestricted/>
									<aimPieOffset>(0, 0.4)</aimPieOffset>
									<drawLayer>3</drawLayer>
									
									<key>mainTurret</key>
								</li>
							</turrets>
						</li>
						<li Class="Vehicles.StatUpgrade">
							<vehicleStats>
								<li>
									<def>CargoCapacity</def>
									<value>-34</value>
								</li>
							</vehicleStats>
						</li>
					</upgrades>
					<graphicOverlays>
						<li>
							<graphicData>
								<texPath>Things/Vehicles/TGBM_Extra/Mule_gunmount</texPath>
								<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
								<drawSize>(5,5)</drawSize>
								<layer>1</layer>
								<shaderType>Cutout</shaderType>
							</graphicData>
						</li>
					</graphicOverlays>
				</li>
				
				<!-- Launchers -->
				<li>
					<key>GrenadeMachineGunAGS</key>
					<label>AGS-30 grenade machine gun</label>
					<description>Attach a grenade machine gun to the bed.\n\nCannot be used with bed canvas. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -17.5kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 30x29mm Grenades</description>
					
					<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
					<work>6000</work>
					<disableIfUpgradeNodesEnabled>
						<li>ExpandedCargoSpace</li>
						<li>MachineGunMTwoFourty</li>
						<li>MachineGunMTwoHB</li>
						<li>GrenadeMachineGun</li>
						<li>RecoillessRifle</li>
						<li>MachineGunPKM</li>
						<li>MachineGunMaxim</li>
						<li>MachineGunDShK</li>
						<li>RecoillessRifleSPG</li>
					</disableIfUpgradeNodesEnabled>
					<gridCoordinate>(6, 21)</gridCoordinate>
					<drawSize>(20, 20)</drawSize>
					<ingredients>
						<Steel>130</Steel>
						<ComponentIndustrial>6</ComponentIndustrial>
					</ingredients>
					<upgrades>
						<li Class="Vehicles.VehicleUpgrade">
							<roles>
								<li>
									<key>gunner</key>
									<editKey>gunnerGMG</editKey>
									
									<handlingTypes>Turret</handlingTypes>
									<slotsToOperate>1</slotsToOperate>
									
									
									<turretIds>
										<li>mainTurret</li>
									</turretIds>
									
									<pawnRenderer>
										<layer>1</layer>
										<drawOffsetNorth>(0, 0, -1)</drawOffsetNorth>
										<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
										<drawOffsetEast>(-1.9, 0, 0.5)</drawOffsetEast>
									</pawnRenderer>
								</li>
							</roles>
						</li>
						<li Class="Vehicles.TurretUpgrade">
							<turrets>
								<li>
									<turretDef>TGBM_ExposedAGSThirty</turretDef>
											
									<renderProperties>
										<north>(0, 1.2)</north>
										<south>(0, 0.9)</south>
										<east>(-1, 0.6)</east>
									</renderProperties>
									
									<gizmoLabel>Grenade machine gun</gizmoLabel>
									
									<angleRestricted/>
									<aimPieOffset>(0, 0.4)</aimPieOffset>
									<drawLayer>3</drawLayer>
									
									<key>mainTurret</key>
								</li>
							</turrets>
						</li>
						<li Class="Vehicles.StatUpgrade">
							<vehicleStats>
								<li>
									<def>CargoCapacity</def>
									<value>-17.5</value>
								</li>
							</vehicleStats>
						</li>
					</upgrades>
					<graphicOverlays>
						<li>
							<graphicData>
								<texPath>Things/Vehicles/TGBM_Extra/Mule_gunmount</texPath>
								<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
								<drawSize>(5,5)</drawSize>
								<layer>1</layer>
								<shaderType>Cutout</shaderType>
							</graphicData>
						</li>
					</graphicOverlays>
				</li>
				<li>
					<key>RecoillessRifleSPG</key>
					<label>SPG-9 recoilless rifle</label>
					<description>Attach a recoilless rifle to the bed.\n\nCannot be used with bed canvas. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -60kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; SPG-9 Rockets</description>
					
					<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
					<work>5000</work>
					<disableIfUpgradeNodesEnabled>
						<li>ExpandedCargoSpace</li>
						<li>MachineGunMTwoFourty</li>
						<li>MachineGunMTwoHB</li>
						<li>GrenadeMachineGun</li>
						<li>RecoillessRifle</li>
						<li>MachineGunPKM</li>
						<li>MachineGunMaxim</li>
						<li>MachineGunDShK</li>
						<li>GrenadeMachineGunAGS</li>
					</disableIfUpgradeNodesEnabled>
					<gridCoordinate>(5, 22)</gridCoordinate>
					<drawSize>(20, 20)</drawSize>
					<ingredients>
						<Steel>75</Steel>
						<ComponentIndustrial>6</ComponentIndustrial>
					</ingredients>
					<upgrades>
						<li Class="Vehicles.VehicleUpgrade">
							<roles>
								<li>
									<key>gunner</key>
									<editKey>gunnerRLSPG</editKey>
									
									<handlingTypes>Turret</handlingTypes>
									<slotsToOperate>1</slotsToOperate>
									
									
									<turretIds>
										<li>mainTurret</li>
									</turretIds>
									
									<pawnRenderer>
										<layer>1</layer>
										<drawOffsetNorth>(0, 0, -1)</drawOffsetNorth>
										<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
										<drawOffsetEast>(-1.9, 0, 0.5)</drawOffsetEast>
									</pawnRenderer>
								</li>
							</roles>
						</li>
						<li Class="Vehicles.TurretUpgrade">
							<turrets>
								<li>
									<turretDef>TGBM_ExposedSPGNine</turretDef>
											
									<renderProperties>
										<north>(0, 1.2)</north>
										<south>(0, 0.9)</south>
										<east>(-1, 0.6)</east>
									</renderProperties>
									
									<gizmoLabel>Recoilless rifle</gizmoLabel>
									
									<angleRestricted/>
									<aimPieOffset>(0, 0.4)</aimPieOffset>
									<drawLayer>3</drawLayer>
									
									<key>mainTurret</key>
								</li>
							</turrets>
						</li>
						<li Class="Vehicles.StatUpgrade">
							<vehicleStats>
								<li>
									<def>CargoCapacity</def>
									<value>-60</value>
								</li>
							</vehicleStats>
						</li>
					</upgrades>
					<graphicOverlays>
						<li>
							<graphicData>
								<texPath>Things/Vehicles/TGBM_Extra/Mule_gunmount</texPath>
								<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
								<drawSize>(5,5)</drawSize>
								<layer>1</layer>
								<shaderType>Cutout</shaderType>
							</graphicData>
						</li>
					</graphicOverlays>
				</li>
			</value>
		</match>
	</Operation>
	
	<!-- ======= Tier 2 ======= -->
	<!-- === Roadrunner === -->
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="TGBM_VVE_Roadrunner_UpgradeTree"]/nodes</xpath>
		<value>
			<li>
				<key>MachineGunPKM</key>
				<label>PKM machine gun</label>
				<description>Attach a light machine gun to the bed. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -7.5kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 7.62x54mmR</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>3000</work>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
					<li>GrenadeMachineGun</li>
					<li>RecoillessLauncherCG</li>
					<li>TurretRocketswarm</li>
					<li>MachineGunDShK</li>
					<li>MachineGunKPV</li>
					<li>GrenadeMachineGunAGSThirty</li>
					<li>RecoillessLauncherSPGNine</li>
				</disableIfUpgradeNodesEnabled>
				
				<ingredients>
					<Steel>150</Steel>
					<ComponentIndustrial>5</ComponentIndustrial>
				</ingredients>
				
				<gridCoordinate>(5, 20)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<editKey>gunnerMMG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>mainTurret</li>
								</turretIds>
								
								<pawnRenderer>
									<layer>1</layer>
									<drawOffsetNorth>(0, 0, -1.15)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
									<drawOffsetEast>(-1.6, 0, 0.4)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedPKM</turretDef>
										
								<renderProperties>
									<north>(0, -0.2)</north>
									<south>(0, 0.9)</south>
									<east>(-0.65, 0.45)</east>
								</renderProperties>
								
								<gizmoLabel>Light machine gun</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>3</drawLayer>
								
								<key>mainTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-7.5</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Roadrunner_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(8,8)</drawSize>
							<layer>1</layer>
							<shaderType>Cutout</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
			<li>
				<key>MachineGunDShK</key>
				<label>DShK machine gun</label>
				<description>Attach a heavy machine gun to the truck's bed. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -34kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 12.7x108mm</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>4000</work>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
					<li>GrenadeMachineGun</li>
					<li>RecoillessLauncherCG</li>
					<li>TurretRocketswarm</li>
					<li>MachineGunPKM</li>
					<li>MachineGunKPV</li>
					<li>GrenadeMachineGunAGSThirty</li>
					<li>RecoillessLauncherSPGNine</li>
				</disableIfUpgradeNodesEnabled>
				
				<ingredients>
					<Steel>210</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				
				<gridCoordinate>(5, 21)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<editKey>gunnerHMG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>mainTurret</li>
								</turretIds>
								
								<pawnRenderer>
									<layer>1</layer>
									<drawOffsetNorth>(0, 0, -1.15)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
									<drawOffsetEast>(-1.6, 0, 0.4)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedDShK</turretDef>
										
								<renderProperties>
									<north>(0, -0.2)</north>
									<south>(0, 0.9)</south>
									<east>(-0.65, 0.45)</east>
								</renderProperties>
								
								<gizmoLabel>Heavy machine gun</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 0.4)</aimPieOffset>
								<drawLayer>3</drawLayer>
								
								<key>mainTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-34</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Roadrunner_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(8,8)</drawSize>
							<layer>1</layer>
							<shaderType>Cutout</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
			<li>
				<key>MachineGunKPV</key>
				<label>KPV machine gun</label>
				<description>Attach a heavy machine gun to the truck's bed. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -50kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 14.5x114mm</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>5000</work>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
					<li>GrenadeMachineGun</li>
					<li>RecoillessLauncherCG</li>
					<li>TurretRocketswarm</li>
					<li>MachineGunPKM</li>
					<li>MachineGunDShK</li>
					<li>GrenadeMachineGunAGSThirty</li>
					<li>RecoillessLauncherSPGNine</li>
				</disableIfUpgradeNodesEnabled>
				
				<ingredients>
					<Steel>210</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				
				<gridCoordinate>(6, 20)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<editKey>gunnerHMG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>mainTurret</li>
								</turretIds>
								
								<pawnRenderer>
									<layer>1</layer>
									<drawOffsetNorth>(0, 0, -1.15)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
									<drawOffsetEast>(-1.6, 0, 0.4)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedKPV</turretDef>
										
								<renderProperties>
									<north>(0, -0.2)</north>
									<south>(0, 0.9)</south>
									<east>(-0.65, 0.45)</east>
								</renderProperties>
								
								<gizmoLabel>Heavy machine gun</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 0.4)</aimPieOffset>
								<drawLayer>3</drawLayer>
								
								<key>mainTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-50</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Roadrunner_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(8,8)</drawSize>
							<layer>1</layer>
							<shaderType>Cutout</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
			<li>
				<key>GrenadeMachineGunAGSThirty</key>
				<label>AGS-30 grenade machine gun</label>
				<description>Attach a grenade machine gun to the bed. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -17.5kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 30x29mm Grenades</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>6000</work>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
					<li>GrenadeMachineGun</li>
					<li>RecoillessLauncherCG</li>
					<li>TurretRocketswarm</li>
					<li>MachineGunPKM</li>
					<li>MachineGunKPV</li>
					<li>MachineGunDShK</li>
					<li>RecoillessLauncherSPGNine</li>
				</disableIfUpgradeNodesEnabled>
				
				<ingredients>
					<Steel>130</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				
				<gridCoordinate>(6, 21)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<editKey>gunnerGMG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>mainTurret</li>
								</turretIds>
								
								<pawnRenderer>
									<layer>1</layer>
									<drawOffsetNorth>(0, 0, -1.15)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
									<drawOffsetEast>(-1.6, 0, 0.4)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedAGSThirty</turretDef>
										
								<renderProperties>
									<north>(0, -0.2)</north>
									<south>(0, 0.9)</south>
									<east>(-0.65, 0.45)</east>
								</renderProperties>
								
								<gizmoLabel>Grenade machine gun</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 0.2)</aimPieOffset>
								<drawLayer>3</drawLayer>
								
								<key>mainTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-17.5</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Roadrunner_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(8,8)</drawSize>
							<layer>1</layer>
							<shaderType>Cutout</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
			<li>
				<key>RecoillessLauncherSPGNine</key>
				<label>SPG-9 recoilless launcher</label>
				<description>Attach a recoilless launcher to the bed. Significantly reduces maximum load capacity. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -60kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; SPG-9 Rockets</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>5000</work>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourty</li>
					<li>MachineGunMTwoHB</li>
					<li>GrenadeMachineGun</li>
					<li>RecoillessLauncherCG</li>
					<li>TurretRocketswarm</li>
					<li>MachineGunPKM</li>
					<li>MachineGunKPV</li>
					<li>MachineGunDShK</li>
					<li>GrenadeMachineGunAGSThirty</li>
				</disableIfUpgradeNodesEnabled>
				
				<ingredients>
					<Steel>75</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				
				<gridCoordinate>(5, 22)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunner</key>
								<editKey>gunnerRLSPG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>mainTurret</li>
								</turretIds>
								
								<pawnRenderer>
									<layer>1</layer>
									<drawOffsetNorth>(0, 0, -1.15)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
									<drawOffsetEast>(-1.6, 0, 0.4)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedSPGNine</turretDef>
										
								<renderProperties>
									<north>(0, -0.2)</north>
									<south>(0, 0.9)</south>
									<east>(-0.65, 0.45)</east>
								</renderProperties>
								
								<gizmoLabel>Recoilless rifle</gizmoLabel>
								
								<angleRestricted/>
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>3</drawLayer>
								
								<key>mainTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-60</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
				<graphicOverlays>
					<li>
						<graphicData>
							<texPath>Things/Vehicles/TGBM_Extra/Roadrunner_gunmount</texPath>
							<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
							<drawSize>(8,8)</drawSize>
							<layer>1</layer>
							<shaderType>Cutout</shaderType>
						</graphicData>
					</li>
				</graphicOverlays>
			</li>
		</value>
	</Operation>
	
	<!-- === Trawler === -->
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/Vehicles.UpgradeTreeDef[defName="TGBM_VVE_Trawler_UpgradeTree"]/nodes</xpath>
		<value>
			<!--MMG (Maxim) -->
			<li>
				<key>MachineGunMaximFront</key>
				<label>Maxim gun (Bow)</label>
				<description>Add a Maxim machine gun to the bow of the vessel. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -18kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 7.62x54mmR</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>3000</work>
				<ingredients>
					<Steel>150</Steel>
					<ComponentIndustrial>5</ComponentIndustrial>
				</ingredients>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourtyFront</li>
					<li>MachineGunMTwoHBFront</li>
					<li>MachineGunGrenadeFront</li>
					<li>RecoillessLauncherCGFront</li>
					<li>MachineGunKPVFront</li>
					<li>MachineGunGrenadeAGSThirtyFront</li>
					<li>RecoillessLauncherSPGFront</li>
				</disableIfUpgradeNodesEnabled>
				
				<gridCoordinate>(6, 20)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunnerbow</key>
								<editKey>gunnerMMG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>bowTurret</li>
								</turretIds>
								
								<hitbox>
									<cells>
										<li>(1, 1)</li>
									</cells>
								</hitbox>
								
								<pawnRenderer>
									<layer>1</layer>
									<drawOffsetNorth>(0, 0, 2.5)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, -1)</drawOffsetSouth>
									<drawOffsetEast>(1.6, 0, 0.3)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedMaxim</turretDef>
										
								<renderProperties>
									<north>(0, 2.6)</north>
									<south>(0, -1.8)</south>
									<east>(2.25, 0.3)</east>
								</renderProperties>
								
								<gizmoLabel>Bow medium machine gun</gizmoLabel>
								
								<angleRestricted>(225, 135)</angleRestricted>
								
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>2</drawLayer>
								
								<key>bowTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-18</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
			</li>
			<li>
				<key>MachineGunMaximBack</key>
				<label>Maxim gun (Aft)</label>
				<description>Add a rifle-caliber machine gun to the aft of the vessel. Used from the Passenger 3 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -18kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 7.62x54mmR</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>3000</work>
				<ingredients>
					<Steel>150</Steel>
					<ComponentIndustrial>5</ComponentIndustrial>
				</ingredients>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourtyBack</li>
					<li>MachineGunMTwoHBBack</li>
					<li>MachineGunGrenadeBack</li>
					<li>RecoillessLauncherCGBack</li>
					<li>MachineGunKPVBack</li>
					<li>MachineGunGrenadeAGSThirtyBack</li>
					<li>RecoillessLauncherSPGBack</li>
				</disableIfUpgradeNodesEnabled>
				
				<gridCoordinate>(5, 20)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunneraft</key>
								<editKey>gunnerMMG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>aftTurret</li>
								</turretIds>
								
								<hitbox>
									<cells>
										<li>(1, -2)</li>
									</cells>
								</hitbox>
								
								<pawnRenderer>
									<layer>1</layer>
									<layerNorth>1</layerNorth>
									<layerSouth>0</layerSouth>
									<angleNorth>0</angleNorth>
									<angleEast>0</angleEast>
									<angleSouth>0</angleSouth>
									<angleNorthEast>0</angleNorthEast>
									<angleSouthEast>0</angleSouthEast>
									<drawOffsetNorth>(0, 0, -1.2)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
									<drawOffsetEast>(-1.6, 0, 0.2)</drawOffsetEast>
									
									<north>South</north>
									<east>West</east>
									<south>North</south>
									<west>East</west>
									<northEast>South</northEast>
									<southEast>North</southEast>
									<southWest>North</southWest>
									<northWest>South</northWest>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedMaxim</turretDef>
										
								<renderProperties>
									<north>(0, -2)</north>
									<south>(0, 2.55)</south>
									<east>(-2.7, 0.3)</east>
								</renderProperties>
								
								<gizmoLabel>Aft medium machine gun</gizmoLabel>
								
								<defaultAngleRotated>180</defaultAngleRotated>
								<angleRestricted>(45, 315)</angleRestricted>

								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>aftTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-18</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
			</li>
			
			<!--HMG (KPV) -->
			<li>
				<key>MachineGunKPVFront</key>
				<label>KPV machine gun (Bow)</label>
				<description>Add a heavy machine gun to the bow of the vessel. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -58kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 14.5x114mm</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>5000</work>
				<ingredients>
					<Steel>210</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourtyFront</li>
					<li>MachineGunMTwoHBFront</li>
					<li>MachineGunGrenadeFront</li>
					<li>RecoillessLauncherCGFront</li>
					<li>MachineGunMaximFront</li>
					<li>MachineGunGrenadeAGSThirtyFront</li>
					<li>RecoillessLauncherSPGFront</li>
				</disableIfUpgradeNodesEnabled>
				
				<gridCoordinate>(6, 21)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunnerbow</key>
								<editKey>gunnerHMG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>bowTurret</li>
								</turretIds>
								
								<hitbox>
									<cells>
										<li>(1, 1)</li>
									</cells>
								</hitbox>
								
								<pawnRenderer>
									<layer>1</layer>
									<drawOffsetNorth>(0, 0, 2.5)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, -1)</drawOffsetSouth>
									<drawOffsetEast>(1.6, 0, 0.3)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedKPV</turretDef>
										
								<renderProperties>
									<north>(0, 2.6)</north>
									<south>(0, -1.8)</south>
									<east>(2.25, 0.3)</east>
								</renderProperties>
								
								<gizmoLabel>Bow heavy machine gun</gizmoLabel>
								
								<angleRestricted>(225, 135)</angleRestricted>
								
								<aimPieOffset>(0, 0.4)</aimPieOffset>
								<drawLayer>2</drawLayer>
								
								<key>bowTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-58</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
			</li>
			<li>
				<key>MachineGunKPVBack</key>
				<label>KPV machine gun (Aft)</label>
				<description>Add a heavy machine gun to the aft of the vessel. Used from the Passenger 3 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -58kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 14.5x114mm</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>5000</work>
				<ingredients>
					<Steel>210</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourtyBack</li>
					<li>MachineGunMTwoHBBack</li>
					<li>MachineGunGrenadeBack</li>
					<li>RecoillessLauncherCGBack</li>
					<li>MachineGunMaximBack</li>
					<li>MachineGunGrenadeAGSThirtyBack</li>
					<li>RecoillessLauncherSPGBack</li>
				</disableIfUpgradeNodesEnabled>
				
				<gridCoordinate>(5, 21)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunneraft</key>
								<editKey>gunnerHMG</editKey>

								<hitbox>
									<cells>
										<li>(1, -2)</li>
									</cells>
								</hitbox>
								
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>aftTurret</li>
								</turretIds>
								
								<pawnRenderer>
									<layer>1</layer>
									<layerNorth>1</layerNorth>
									<layerSouth>0</layerSouth>
									<angleNorth>0</angleNorth>
									<angleEast>0</angleEast>
									<angleSouth>0</angleSouth>
									<angleNorthEast>0</angleNorthEast>
									<angleSouthEast>0</angleSouthEast>
									<drawOffsetNorth>(0, 0, -1.2)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
									<drawOffsetEast>(-1.6, 0, 0.2)</drawOffsetEast>
									
									<north>South</north>
									<east>West</east>
									<south>North</south>
									<west>East</west>
									<northEast>South</northEast>
									<southEast>North</southEast>
									<southWest>North</southWest>
									<northWest>South</northWest>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedKPV</turretDef>
										
								<renderProperties>
									<north>(0, -2)</north>
									<south>(0, 2.55)</south>
									<east>(-2.7, 0.3)</east>
								</renderProperties>
								
								<gizmoLabel>Aft heavy machine gun</gizmoLabel>
								
								<defaultAngleRotated>180</defaultAngleRotated>
								<angleRestricted>(45, 315)</angleRestricted>

								<aimPieOffset>(0, 0.4)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>aftTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-15</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
			</li>
		
			<!--GMG (AGS-30>-->
			<li>
				<key>MachineGunGrenadeAGSThirtyFront</key>
				<label>AGS-30 grenade machine gun (Bow)</label>
				<description>Add a grenade machine gun to the bow of the vessel. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -17.5kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 30x29mm Grenades</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>6000</work>
				<ingredients>
					<Steel>130</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourtyFront</li>
					<li>MachineGunMTwoHBFront</li>
					<li>RecoillessLauncherCGFront</li>
					<li>MachineGunMaximFront</li>
					<li>MachineGunKPVFront</li>
					<li>RecoillessLauncherSPGFront</li>
				</disableIfUpgradeNodesEnabled>
				
				<gridCoordinate>(6, 22)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunnerbow</key>
								<editKey>gunnerGMG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>bowTurret</li>
								</turretIds>
								
								<hitbox>
									<cells>
										<li>(1, 1)</li>
									</cells>
								</hitbox>
								
								<pawnRenderer>
									<layer>1</layer>
									<drawOffsetNorth>(0, 0, 2.5)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, -1)</drawOffsetSouth>
									<drawOffsetEast>(1.6, 0, 0.3)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedGMG</turretDef>
										
								<renderProperties>
									<north>(0, 2.6)</north>
									<south>(0, -1.8)</south>
									<east>(2.25, 0.3)</east>
								</renderProperties>
								
								<gizmoLabel>Bow grenade machine gun</gizmoLabel>
								
								<angleRestricted>(225, 135)</angleRestricted>
								
								<aimPieOffset>(0, 0.2)</aimPieOffset>
								<drawLayer>2</drawLayer>
								
								<key>bowTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-17.5</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
			</li>
			<li>
				<key>MachineGunGrenadeAGSThirtyBack</key>
				<label>AGS-30 grenade machine gun (Aft)</label>
				<description>Add a grenade machine gun to the aft of the vessel. Used from the Passenger 3 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -17.5kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; 30x29mm Grenades</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>6000</work>
				<ingredients>
					<Steel>130</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourtyBack</li>
					<li>MachineGunMTwoHBBack</li>
					<li>RecoillessLauncherCGBack</li>
					<li>MachineGunMaximBack</li>
					<li>MachineGunKPVBack</li>
					<li>RecoillessLauncherSPGBack</li>
				</disableIfUpgradeNodesEnabled>
				
				<gridCoordinate>(5, 22)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunneraft</key>
								<editKey>gunnerGMG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>aftTurret</li>
								</turretIds>
								
								<hitbox>
									<cells>
										<li>(1, -2)</li>
									</cells>
								</hitbox>
								
								<pawnRenderer>
									<layer>1</layer>
									<layerNorth>1</layerNorth>
									<layerSouth>0</layerSouth>
									<angleNorth>0</angleNorth>
									<angleEast>0</angleEast>
									<angleSouth>0</angleSouth>
									<angleNorthEast>0</angleNorthEast>
									<angleSouthEast>0</angleSouthEast>
									<drawOffsetNorth>(0, 0, -1.2)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
									<drawOffsetEast>(-1.6, 0, 0.2)</drawOffsetEast>
									
									<north>South</north>
									<east>West</east>
									<south>North</south>
									<west>East</west>
									<northEast>South</northEast>
									<southEast>North</southEast>
									<southWest>North</southWest>
									<northWest>South</northWest>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedGMG</turretDef>
										
								<renderProperties>
									<north>(0, -0.1)</north>
									<south>(0, -1.8)</south>
									<east>(2.25, 0.3)</east>
								</renderProperties>
								
								<gizmoLabel>Aft grenade machine gun</gizmoLabel>
								
								<defaultAngleRotated>180</defaultAngleRotated>
								<angleRestricted>(45, 315)</angleRestricted>

								<aimPieOffset>(0, 0.2)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>aftTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-17.5</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
			</li>
			
			<!--RL (SPG-9)-->
			<li>
				<key>RecoillessLauncherSPGFront</key>
				<label>SPG-9 recoilless launcher (Bow)</label>
				<description>Add an anti-tank recoilless launcher to the bow of the vessel. Used from the Passenger 2 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -60kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; SPG-9 Rockets</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>5000</work>
				<ingredients>
					<Steel>75</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourtyFront</li>
					<li>MachineGunMTwoHBFront</li>
					<li>MachineGunGrenadeFront</li>
					<li>MachineGunMaximFront</li>
					<li>MachineGunKPVFront</li>
					<li>MachineGunGrenadeAGSThirtyFront</li>
				</disableIfUpgradeNodesEnabled>
				
				<gridCoordinate>(6, 23)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunnerbow</key>
								<editKey>gunnerRLSPG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>bowTurret</li>
								</turretIds>
								
								<hitbox>
									<cells>
										<li>(1, 1)</li>
									</cells>
								</hitbox>
								
								<pawnRenderer>
									<layer>1</layer>
									<drawOffsetNorth>(0, 0, 2.5)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, -1)</drawOffsetSouth>
									<drawOffsetEast>(1.6, 0, 0.3)</drawOffsetEast>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedSPGNine</turretDef>
										
								<renderProperties>
									<north>(0, 2.6)</north>
									<south>(0, -1.8)</south>
									<east>(2.25, 0.3)</east>
								</renderProperties>
								
								<gizmoLabel>Bow recoilless rifle</gizmoLabel>
								
								<angleRestricted>(225, 135)</angleRestricted>
								
								<aimPieOffset>(0, 0)</aimPieOffset>
								<drawLayer>2</drawLayer>
								
								<key>bowTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-60</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
			</li>
			<li>
				<key>RecoillessLauncherSPGBack</key>
				<label>SPG-9 recoilless launcher (Aft)</label>
				<description>Add an anti-tank recoilless launcher to the bow of the vessel. Used from the Passenger 3 seat.\n\n&lt;color=#bb8f04&gt;Cargo capacity:&lt;/color&gt; -60kg\n&lt;color=#bb8f04&gt;Ammo type:&lt;/color&gt; SPG-9 Rockets</description>
				<icon>TGBM_ThirdParty_UI/VVEU_Upgrade_Turret</icon>
				<work>5000</work>
				<ingredients>
					<Steel>75</Steel>
					<ComponentIndustrial>6</ComponentIndustrial>
				</ingredients>
				
				<disableIfUpgradeNodesEnabled>
					<li>MachineGunMTwoFourtyBack</li>
					<li>MachineGunMTwoHBBack</li>
					<li>MachineGunGrenadeBack</li>
					<li>MachineGunMaximBack</li>
					<li>MachineGunKPVBack</li>
					<li>MachineGunGrenadeAGSThirtyBack</li>
				</disableIfUpgradeNodesEnabled>
				
				<gridCoordinate>(5, 23)</gridCoordinate>
				<drawSize>(20, 20)</drawSize>
				<upgrades>
					<li Class="Vehicles.VehicleUpgrade">
						<roles>
							<li>
								<key>gunneraft</key>
								<editKey>gunnerRLSPG</editKey>
								
								<slotsToOperate>1</slotsToOperate>
								<handlingTypes>Turret</handlingTypes>
								
								<turretIds>
									<li>aftTurret</li>
								</turretIds>
								
								<hitbox>
									<cells>
										<li>(1, -2)</li>
									</cells>
								</hitbox>
								
								<pawnRenderer>
									<layer>1</layer>
									<layerNorth>1</layerNorth>
									<layerSouth>0</layerSouth>
									<angleNorth>0</angleNorth>
									<angleEast>0</angleEast>
									<angleSouth>0</angleSouth>
									<angleNorthEast>0</angleNorthEast>
									<angleSouthEast>0</angleSouthEast>
									<drawOffsetNorth>(0, 0, -1.2)</drawOffsetNorth>
									<drawOffsetSouth>(0, 0, 2)</drawOffsetSouth>
									<drawOffsetEast>(-1.6, 0, 0.2)</drawOffsetEast>
									
									<north>South</north>
									<east>West</east>
									<south>North</south>
									<west>East</west>
									<northEast>South</northEast>
									<southEast>North</southEast>
									<southWest>North</southWest>
									<northWest>South</northWest>
								</pawnRenderer>
							</li>
						</roles>
					</li>
					<li Class="Vehicles.TurretUpgrade">
						<turrets>
							<li>
								<turretDef>TGBM_ExposedSPGNine</turretDef>
										
								<renderProperties>
									<north>(0, -2)</north>
									<south>(0, 2.55)</south>
									<east>(-2.7, 0.3)</east>
								</renderProperties>
								
								<gizmoLabel>Aft recoilless rifle</gizmoLabel>
								
								<defaultAngleRotated>180</defaultAngleRotated>
								<angleRestricted>(45, 315)</angleRestricted>

								<aimPieOffset>(0, 0.4)</aimPieOffset>
								<drawLayer>1</drawLayer>
								
								<key>aftTurret</key>
							</li>
						</turrets>
					</li>
					<li Class="Vehicles.StatUpgrade">
						<vehicleStats>
							<li>
								<def>CargoCapacity</def>
								<value>-60</value>
							</li>
						</vehicleStats>
					</li>
				</upgrades>
			</li>
		</value>
	</Operation>
</Patch>