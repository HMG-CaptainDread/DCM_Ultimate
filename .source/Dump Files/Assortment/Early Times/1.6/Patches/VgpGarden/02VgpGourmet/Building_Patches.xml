<?xml version="1.0" encoding="utf-8"?>
<Patch>
  
  <Operation Class="PatchOperationFindMod">
	  <mods>
		  <li>VGP Garden Gourmet</li>
	  </mods>
	  <match Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
		 
			<!-- cooking tools -->
			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[defName = "Oven" or defName = "ElectricOven" or defName = "HandCanningstove" or defName = "Canningstove"
								   or defName = "FueledCandyTable" or defName = "CandyTable" or defName = "GrindStone" or defName = "ElectricGrindStone"
								   ]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
				<value>
					<li>CookingToolCabinet</li>
				</value>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>/Defs/ThingDef[defName = "CookingTools"]/costList</xpath>		
				<value>
					<costList>
					  <MedTimes_CookingTools>15</MedTimes_CookingTools>
					  <Steel>30</Steel>
					</costList>
				</value>
			</li>
			
			<!-- research lock -->
			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[defName = "Oven"]</xpath>		
				<value>
					<researchPrerequisites>
						<li>MedTimes_ContainedFire</li>
						<li>MedTimes_BasicCooking</li>
					</researchPrerequisites>
				</value>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[defName = "ElectricOven"]/researchPrerequisites</xpath>		
				<value>
						<li>MedTimes_ContainedFire</li>
						<li>MedTimes_BasicCooking</li>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[defName = "HandCanningstove"]</xpath>		
				<value>
					<researchPrerequisites>
						<li>MedTimes_ContainedFire</li>
						<li>MedTimes_Cooking</li>
					</researchPrerequisites>
				</value>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[defName = "Canningstove"]/researchPrerequisites</xpath>		
				<value>
					<li>MedTimes_Cooking</li>
					<li>MedTimes_Toolworking</li>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[defName = "CookingTools"]</xpath>		
				<value>
					<researchPrerequisites>
						<li>MedTimes_Toolworking</li>
						<li>MedTimes_Cooking</li>
					</researchPrerequisites>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[defName = "GrindStone"]</xpath>		
				<value>
					<researchPrerequisites>
						<li>TS_Agriculture</li>
						<li>Stonecutting</li>
						<li>MedTimes_BasicCooking</li>
					</researchPrerequisites>
				</value>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[defName = "ElectricGrindStone"]/researchPrerequisites</xpath>		
				<value>
						<li>TS_Agriculture</li>
						<li>Stonecutting</li>
						<li>MedTimes_BasicCooking</li>
				</value>
			</li>
			
		</operations>
	</match>
  </Operation>
    
</Patch>